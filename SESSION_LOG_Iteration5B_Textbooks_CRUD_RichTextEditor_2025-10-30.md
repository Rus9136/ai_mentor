# SESSION LOG: –ò—Ç–µ—Ä–∞—Ü–∏—è 5B - –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —É—á–µ–±–Ω–∏–∫–∏ (CRUD + Rich Text Editor)

**–î–∞—Ç–∞:** 2025-10-30 - 2025-10-31
**–ò—Ç–µ—Ä–∞—Ü–∏—è:** 5B
**–í—Å–µ–≥–æ —Ñ–∞–∑:** 5
**–°—Ç–∞—Ç—É—Å:** üöß –í –ü–†–û–¶–ï–°–°–ï (4/5 —Ñ–∞–∑ –∑–∞–≤–µ—Ä—à–µ–Ω–æ, –§–∞–∑–∞ 4 —á–∞—Å—Ç–∏—á–Ω–æ)
**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–ø–ª–∞–Ω):** ~1.5 –Ω–µ–¥–µ–ª–∏
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ CRUD –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —É—á–µ–±–Ω–∏–∫–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Å–æ–∑–¥–∞–Ω–∏—è, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–≥–ª–∞–≤—ã + –ø–∞—Ä–∞–≥—Ä–∞—Ñ—ã) –∏ Rich Text Editor –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤.

**–ö–ª—é—á–µ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- React Admin v5 –¥–ª—è CRUD —Ñ–æ—Ä–º
- MUI TreeView (v7) –¥–ª—è –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- TinyMCE –¥–ª—è Rich Text Editor (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
- KaTeX –¥–ª—è LaTeX —Ñ–æ—Ä–º—É–ª (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

---

## üéØ –û–±—â–∏–π –ø–ª–∞–Ω –∏—Ç–µ—Ä–∞—Ü–∏–∏

### ‚úÖ –§–∞–∑–∞ 1: CRUD —Ñ–æ—Ä–º—ã –¥–ª—è —É—á–µ–±–Ω–∏–∫–æ–≤ (–ó–ê–í–ï–†–®–ï–ù–ê)
**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 2-3 –¥–Ω—è
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê 2025-10-30

#### –ó–∞–¥–∞—á–∏:
- [x] –°–æ–∑–¥–∞—Ç—å TextbookCreate - —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è —É—á–µ–±–Ω–∏–∫–∞
- [x] –°–æ–∑–¥–∞—Ç—å TextbookEdit - —Ñ–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- [x] –û–±–Ω–æ–≤–∏—Ç—å TextbookList - –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É —Å–æ–∑–¥–∞–Ω–∏—è
- [x] –û–±–Ω–æ–≤–∏—Ç—å App.tsx - –¥–æ–±–∞–≤–∏—Ç—å create/edit –≤ Resource
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### ‚úÖ –§–∞–∑–∞ 2: Tree View —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–ó–ê–í–ï–†–®–ï–ù–ê)
**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 3-4 –¥–Ω—è
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê 2025-10-30

#### –ó–∞–¥–∞—á–∏:
- [x] –°–æ–∑–¥–∞—Ç—å TextbookStructureEditor —Å Tree View
- [x] –°–æ–∑–¥–∞—Ç—å ChapterCreateDialog –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≥–ª–∞–≤—ã
- [x] –°–æ–∑–¥–∞—Ç—å ChapterEditDialog –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥–ª–∞–≤—ã
- [x] –°–æ–∑–¥–∞—Ç—å ChapterDeleteDialog –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è
- [x] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä –≤ TextbookShow
- [x] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –ø—É–Ω–∫—Ç–∞ –º–µ–Ω—é "–£—á–µ–±–Ω–∏–∫–∏"

### ‚úÖ –§–∞–∑–∞ 3: Rich Text Editor –¥–ª—è –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤ (–ó–ê–í–ï–†–®–ï–ù–ê)
**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 3-4 –¥–Ω—è
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê 2025-10-30

#### –ó–∞–¥–∞—á–∏:
- [x] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å TinyMCE: `@tinymce/tinymce-react` + `use-debounce`
- [x] –°–æ–∑–¥–∞—Ç—å ParagraphCreateDialog –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [x] –°–æ–∑–¥–∞—Ç—å ParagraphEditorDialog –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å TinyMCE
- [x] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Toolbar (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–ø–∏—Å–∫–∏, —Å—Å—ã–ª–∫–∏, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Ç–∞–±–ª–∏—Ü—ã)
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Auto-save (debounce 30 —Å–µ–∫)
- [x] –î–æ–±–∞–≤–∏—Ç—å Preview —Ä–µ–∂–∏–º
- [x] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ TextbookStructureEditor (–∫–Ω–æ–ø–∫–∏ Create/Edit/Delete)
- [x] –ò—Å–ø—Ä–∞–≤–∏—Ç—å backend: –¥–æ–±–∞–≤–∏—Ç—å GET endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞

### üöß –§–∞–∑–∞ 4: LaTeX —Ñ–æ—Ä–º—É–ª—ã + Upload —Ñ–∞–π–ª–æ–≤
**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 2-3 –¥–Ω—è
**–°—Ç–∞—Ç—É—Å:** üöß –í –ü–†–û–¶–ï–°–°–ï (–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∞)

#### –ó–∞–¥–∞—á–∏:
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è KaTeX –¥–ª—è LaTeX —Ñ–æ—Ä–º—É–ª
- [x] Custom plugin –¥–ª—è TinyMCE (–≤—Å—Ç–∞–≤–∫–∞ —Ñ–æ—Ä–º—É–ª)
- [x] Backend endpoints –¥–ª—è upload (POST /upload/image –∏ /upload/pdf)
- [x] TinyMCE images_upload_handler –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- [x] StaticFiles middleware –¥–ª—è —Ä–∞–∑–¥–∞—á–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ LaTeX —Ñ–æ—Ä–º—É–ª –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Image Upload —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- [ ] PDFUpload –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –≤—Å–µ–≥–æ —É—á–µ–±–Ω–∏–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### üé® –§–∞–∑–∞ 5: –ü–æ–ª–∏—Ä–æ–≤–∫–∞ + —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 1-2 –¥–Ω—è
**–°—Ç–∞—Ç—É—Å:** ‚è≥ –ù–ï –ù–ê–ß–ê–¢–ê

#### –ó–∞–¥–∞—á–∏:
- [ ] Drag-and-drop –¥–ª—è –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏—è –≥–ª–∞–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–≥–æ —Ñ–ª–æ—É
- [ ] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤
- [ ] TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è –±–µ–∑ –æ—à–∏–±–æ–∫

---

## üìÅ –§–∞–∑–∞ 1: CRUD —Ñ–æ—Ä–º—ã –¥–ª—è —É—á–µ–±–Ω–∏–∫–æ–≤ (–î–ï–¢–ê–õ–¨–ù–û)

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

#### 1. `frontend/src/pages/textbooks/TextbookCreate.tsx`
**–†–∞–∑–º–µ—Ä:** ~150 —Å—Ç—Ä–æ–∫
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —É—á–µ–±–Ω–∏–∫–∞

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `<Create>` - React Admin wrapper
- `<SimpleForm>` - —Ñ–æ—Ä–º–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

**–ü–æ–ª—è —Ñ–æ—Ä–º—ã:**
- **title*** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ) - –ù–∞–∑–≤–∞–Ω–∏–µ —É—á–µ–±–Ω–∏–∫–∞
  - –í–∞–ª–∏–¥–∞—Ü–∏—è: required, maxLength(255)
- **subject*** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ) - –ü—Ä–µ–¥–º–µ—Ç (SelectInput)
  - Choices: 12 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞, –ê–ª–≥–µ–±—Ä–∞, –ì–µ–æ–º–µ—Ç—Ä–∏—è, –§–∏–∑–∏–∫–∞, –∏ —Ç.–¥.)
- **grade_level*** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ) - –ö–ª–∞—Å—Å (SelectInput)
  - Choices: 7-11 –∫–ª–∞—Å—Å—ã
- **author** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ) - –ê–≤—Ç–æ—Ä
- **publisher** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ) - –ò–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ
- **year** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ) - –ì–æ–¥ –∏–∑–¥–∞–Ω–∏—è
  - –í–∞–ª–∏–¥–∞—Ü–∏—è: minValue(1900), maxValue(—Ç–µ–∫—É—â–∏–π –≥–æ–¥)
- **isbn** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ) - ISBN
- **description** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ) - –û–ø–∏—Å–∞–Ω–∏–µ (multiline)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Redirect –Ω–∞ show —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è
- –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π
-HelperText –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è

---

#### 2. `frontend/src/pages/textbooks/TextbookEdit.tsx`
**–†–∞–∑–º–µ—Ä:** ~210 —Å—Ç—Ä–æ–∫
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —É—á–µ–±–Ω–∏–∫–∞

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `<Edit>` - React Admin wrapper
- `<SimpleForm>` - —Ñ–æ—Ä–º–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- **TextbookEditToolbar** - Custom Toolbar —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏

**Toolbar –∫–Ω–æ–ø–∫–∏:**
1. **SaveButton** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. **–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å/–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å** - toggle `is_active`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `useUpdate` hook
   - –ò–∫–æ–Ω–∫–∏: ArchiveIcon / UnarchiveIcon
   - –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å —á–µ—Ä–µ–∑ API

**–ü–æ–ª—è —Ñ–æ—Ä–º—ã:**
- –¢–µ –∂–µ –ø–æ–ª—è —á—Ç–æ –∏ –≤ Create
- –í—Å–µ –ø–æ–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–µ

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- Redirect –Ω–∞ show —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

---

#### 3. `frontend/src/pages/textbooks/TextbookList.tsx` (–æ–±–Ω–æ–≤–ª–µ–Ω)
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –£–±—Ä–∞–Ω `bulkActionButtons={false}` ‚Üí —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "CREATE"
- –°–ø–∏—Å–æ–∫ –æ—Å—Ç–∞–ª—Å—è read-only —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏

**–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã:**
- SearchInput –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
- SelectInput –ø–æ –ø—Ä–µ–¥–º–µ—Ç—É
- SelectInput –ø–æ –∫–ª–∞—Å—Å—É

---

#### 4. `frontend/src/pages/textbooks/index.ts` (–æ–±–Ω–æ–≤–ª–µ–Ω)
**–î–æ–±–∞–≤–ª–µ–Ω—ã —ç–∫—Å–ø–æ—Ä—Ç—ã:**
```typescript
export { TextbookList } from './TextbookList';
export { TextbookCreate } from './TextbookCreate';  // –ù–û–í–´–ô
export { TextbookEdit } from './TextbookEdit';      // –ù–û–í–´–ô
export { TextbookShow } from './TextbookShow';
```

---

#### 5. `frontend/src/App.tsx` (–æ–±–Ω–æ–≤–ª–µ–Ω)
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```typescript
// –ë—ã–ª–æ:
import { TextbookList, TextbookShow } from './pages/textbooks';

// –°—Ç–∞–ª–æ:
import { TextbookList, TextbookCreate, TextbookEdit, TextbookShow } from './pages/textbooks';

// Resource –æ–±–Ω–æ–≤–ª–µ–Ω:
<Resource
  name="textbooks"
  list={TextbookList}
  create={TextbookCreate}  // –î–û–ë–ê–í–õ–ï–ù–û
  edit={TextbookEdit}      // –î–û–ë–ê–í–õ–ï–ù–û
  show={TextbookShow}
  icon={MenuBookIcon}
  options={{ label: '–£—á–µ–±–Ω–∏–∫–∏' }}
/>
```

---

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –§–∞–∑—ã 1

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ Build —É—Å–ø–µ—à–µ–Ω (`npm run build`)
- ‚úÖ Dev —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ http://localhost:5174/
- ‚úÖ Backend API –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 8000
- ‚úÖ PostgreSQL –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
1. –í–æ–π—Ç–∏ –∫–∞–∫ SUPER_ADMIN
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ —Ä–∞–∑–¥–µ–ª "–£—á–µ–±–Ω–∏–∫–∏"
3. –ù–∞–∂–∞—Ç—å "CREATE"
4. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É –∏ —Å–æ–∑–¥–∞—Ç—å —É—á–µ–±–Ω–∏–∫
5. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
6. –ù–∞–∂–∞—Ç—å "Edit" –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
7. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å"

---

## üìÅ –§–∞–∑–∞ 2: Tree View —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–î–ï–¢–ê–õ–¨–ù–û)

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

#### 1. `frontend/src/pages/textbooks/TextbookStructureEditor.tsx`
**–†–∞–∑–º–µ—Ä:** ~320 —Å—Ç—Ä–æ–∫
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —É—á–µ–±–Ω–∏–∫–∞

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- **SimpleTreeView** (MUI v7) - –¥–µ—Ä–µ–≤–æ –≥–ª–∞–≤ –∏ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤
- **TreeItem** - —ç–ª–µ–º–µ–Ω—Ç—ã –¥–µ—Ä–µ–≤–∞ —Å custom labels
- **Card/CardContent** - –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥–ª–∞–≤

**State management:**
```typescript
const [chapters, setChapters] = useState<Chapter[]>([]);
const [paragraphsMap, setParagraphsMap] = useState<Record<number, Paragraph[]>>({});
const [loading, setLoading] = useState(true);

// –î–∏–∞–ª–æ–≥–∏
const [createDialogOpen, setCreateDialogOpen] = useState(false);
const [editDialogOpen, setEditDialogOpen] = useState(false);
const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);
const [selectedChapter, setSelectedChapter] = useState<Chapter | null>(null);
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
1. **–ó–∞–≥—Ä—É–∑–∫–∞ –≥–ª–∞–≤** - `fetchChapters()`
   - Endpoint: GET `/api/v1/admin/global/textbooks/{id}/chapters`
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –≤–∏–¥–µ –¥–µ—Ä–µ–≤–∞

2. **Lazy loading –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤** - `fetchParagraphs(chapterId)`
   - Endpoint: GET `/api/v1/admin/global/chapters/{id}/paragraphs`
   - –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–∞—Å–∫—Ä—ã—Ç–∏–∏ —É–∑–ª–∞ –≥–ª–∞–≤—ã
   - –ö–µ—à–∏—Ä—É—é—Ç—Å—è –≤ `paragraphsMap`

3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–ª–∞–≤–∞–º–∏:**
   - –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å –≥–ª–∞–≤—É" ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç ChapterCreateDialog
   - –ò–∫–æ–Ω–∫–∞ Edit ‚Üí ChapterEditDialog
   - –ò–∫–æ–Ω–∫–∞ Delete ‚Üí ChapterDeleteDialog

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ MUI v7 API:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `SimpleTreeView` –≤–º–µ—Å—Ç–æ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ `TreeView`
- `itemId` –≤–º–µ—Å—Ç–æ `nodeId`
- `slots` –¥–ª—è –∏–∫–æ–Ω–æ–∫ –≤–º–µ—Å—Ç–æ props
- `onExpandedItemsChange` –≤–º–µ—Å—Ç–æ `onNodeToggle`

**Tree structure:**
```
üìö –£—á–µ–±–Ω–∏–∫
  ‚îú‚îÄ üìñ –ì–ª–∞–≤–∞ 1: –ù–∞–∑–≤–∞–Ω–∏–µ
  ‚îÇ   ‚îú‚îÄ ¬ß1. –ü–∞—Ä–∞–≥—Ä–∞—Ñ 1
  ‚îÇ   ‚îú‚îÄ ¬ß2. –ü–∞—Ä–∞–≥—Ä–∞—Ñ 2
  ‚îÇ   ‚îî‚îÄ ¬ß3. –ü–∞—Ä–∞–≥—Ä–∞—Ñ 3
  ‚îú‚îÄ üìñ –ì–ª–∞–≤–∞ 2: –ù–∞–∑–≤–∞–Ω–∏–µ
  ‚îÇ   ‚îî‚îÄ [–ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤...]
  ‚îî‚îÄ üìñ –ì–ª–∞–≤–∞ 3: –ù–∞–∑–≤–∞–Ω–∏–µ
      ‚îî‚îÄ –ù–µ—Ç –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤ –≤ –≥–ª–∞–≤–µ
```

---

#### 2. `frontend/src/pages/textbooks/ChapterCreateDialog.tsx`
**–†–∞–∑–º–µ—Ä:** ~180 —Å—Ç—Ä–æ–∫
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Modal –¥–∏–∞–ª–æ–≥ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –≥–ª–∞–≤—ã

**–§–æ—Ä–º–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç:**
```typescript
interface ChapterFormData {
  title: string;           // –ù–∞–∑–≤–∞–Ω–∏–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  number: number;          // –ù–æ–º–µ—Ä –≥–ª–∞–≤—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, >= 1)
  order: number;           // –ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, >= 1)
  description: string;     // –û–ø–∏—Å–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  learning_objective: string; // –¶–µ–ª—å –æ–±—É—á–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
}
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- title: required, maxLength(255)
- number: >= 1
- order: >= 1

**API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- Method: POST
- Endpoint: `/api/v1/admin/global/chapters`
- Headers: Authorization Bearer token
- Body: JSON payload —Å textbook_id

**Flow:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–î–æ–±–∞–≤–∏—Ç—å –≥–ª–∞–≤—É"
2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –¥–∏–∞–ª–æ–≥ —Å –ø—É—Å—Ç–æ–π —Ñ–æ—Ä–º–æ–π
3. –ó–∞–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª—è –∏ –Ω–∞–∂–∏–º–∞–µ—Ç "–°–æ–∑–¥–∞—Ç—å"
4. –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ backend
5. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ + –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –≥–ª–∞–≤ + –∑–∞–∫—Ä—ã—Ç–∏–µ –¥–∏–∞–ª–æ–≥–∞
6. –ü—Ä–∏ –æ—à–∏–±–∫–µ: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ

---

#### 3. `frontend/src/pages/textbooks/ChapterEditDialog.tsx`
**–†–∞–∑–º–µ—Ä:** ~190 —Å—Ç—Ä–æ–∫
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Modal –¥–∏–∞–ª–æ–≥ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –≥–ª–∞–≤—ã

**–û—Ç–ª–∏—á–∏—è –æ—Ç Create:**
- –ü—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `useEffect` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `chapter` prop
- API: PUT `/api/v1/admin/global/chapters/{chapter_id}`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" –≤–º–µ—Å—Ç–æ "–°–æ–∑–¥–∞—Ç—å"
- Title –¥–∏–∞–ª–æ–≥–∞: "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≥–ª–∞–≤—É {number}"
- Nullable –ø–æ–ª—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∫–∞–∫ `null` –≤–º–µ—Å—Ç–æ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫

---

#### 4. `frontend/src/pages/textbooks/ChapterDeleteDialog.tsx`
**–†–∞–∑–º–µ—Ä:** ~100 —Å—Ç—Ä–æ–∫
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –î–∏–∞–ª–æ–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è –≥–ª–∞–≤—ã

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- **DialogTitle** —Å WarningIcon
- **Alert** —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –æ –∫–∞—Å–∫–∞–¥–Ω–æ–º —É–¥–∞–ª–µ–Ω–∏–∏
- –ö–Ω–æ–ø–∫–∏: "–û—Ç–º–µ–Ω–∞" –∏ "–£–¥–∞–ª–∏—Ç—å" (–∫—Ä–∞—Å–Ω–∞—è)

**–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:**
```
‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ! –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≥–ª–∞–≤—ã –±—É–¥—É—Ç —Ç–∞–∫–∂–µ —É–¥–∞–ª–µ–Ω—ã –≤—Å–µ –ø–∞—Ä–∞–≥—Ä–∞—Ñ—ã,
–æ—Ç–Ω–æ—Å—è—â–∏–µ—Å—è –∫ —ç—Ç–æ–π –≥–ª–∞–≤–µ. –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
```

**API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- Method: DELETE
- Endpoint: `/api/v1/admin/global/chapters/{chapter_id}`
- Soft delete –≤ –ë–î (is_deleted = true, deleted_at = timestamp)

---

#### 5. `frontend/src/pages/textbooks/TextbookShow.tsx` (–æ–±–Ω–æ–≤–ª–µ–Ω)
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

**–î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç:**
```typescript
import { TextbookStructureEditor } from './TextbookStructureEditor';
```

**–î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞:**
```typescript
{/* –í–∫–ª–∞–¥–∫–∞ 2: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É—á–µ–±–Ω–∏–∫–∞ (read-only) */}
<Tab label="–ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã" path="chapters">
  <ChaptersTab />
</Tab>

{/* –í–∫–ª–∞–¥–∫–∞ 3: –†–µ–¥–∞–∫—Ç–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (CRUD) */}
<Tab label="–†–µ–¥–∞–∫—Ç–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã" path="editor">
  <EditorTab />
</Tab>
```

**EditorTab –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:**
```typescript
const EditorTab = () => {
  const record = useRecordContext<Textbook>();

  if (!record?.id) {
    return <Alert severity="info">–ó–∞–≥—Ä—É–∑–∫–∞ —É—á–µ–±–Ω–∏–∫–∞...</Alert>;
  }

  return <TextbookStructureEditor textbookId={record.id} />;
};
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–∫–ª–∞–¥–æ–∫:**
1. **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —É—á–µ–±–Ω–∏–∫–∞ (–±—ã–ª–æ)
2. **–ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã** - read-only view —Å Accordion (–±—ã–ª–æ, –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ)
3. **–†–µ–¥–∞–∫—Ç–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã** - –Ω–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ —Å –ø–æ–ª–Ω—ã–º CRUD

---

#### 6. `frontend/src/layout/Menu.tsx` (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω)
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—É–Ω–∫—Ç "–£—á–µ–±–Ω–∏–∫–∏" –±—ã–ª –æ—Ç–∫–ª—é—á–µ–Ω (`disabled`)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

**–î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç:**
```typescript
import { UserRole } from '../types';
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏:**
```typescript
// –ë—ã–ª–æ:
const isSuperAdmin = permissions === 'SUPER_ADMIN';

// –°—Ç–∞–ª–æ:
const isSuperAdmin = permissions === UserRole.SUPER_ADMIN;
```

**–£–±—Ä–∞–Ω disabled —Ñ–ª–∞–≥:**
```typescript
<RaMenu.Item
  to="/textbooks"
  primaryText="–£—á–µ–±–Ω–∏–∫–∏"
  leftIcon={<MenuBookIcon />}
  // disabled - –£–ë–†–ê–ù–û
/>
```

---

#### 7. `frontend/src/types/index.ts` (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω)
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ —Ä–æ–ª–µ–π –º–µ–∂–¥—É frontend –∏ backend
- Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç: `'super_admin'` (lowercase)
- Frontend –ø—Ä–æ–≤–µ—Ä—è–ª: `'SUPER_ADMIN'` (uppercase)

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```typescript
// –ë—ã–ª–æ:
export const UserRole = {
  SUPER_ADMIN: 'SUPER_ADMIN',
  ADMIN: 'ADMIN',
  // ...
};

// –°—Ç–∞–ª–æ:
export const UserRole = {
  SUPER_ADMIN: 'super_admin',  // —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ë–î
  ADMIN: 'admin',
  TEACHER: 'teacher',
  STUDENT: 'student',
  PARENT: 'parent',
} as const;
```

**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–æ–±–∞–≤–ª–µ–Ω:**
```typescript
// –ó–Ω–∞—á–µ–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ñ–æ—Ä–º–∞—Ç—É –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (lowercase —Å underscores)
```

---

### –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

#### `@mui/x-tree-view`
**–í–µ—Ä—Å–∏—è:** Latest (compatible with MUI v7)
**–†–∞–∑–º–µ—Ä:** 6 packages added
**–ö–æ–º–∞–Ω–¥–∞:** `npm install @mui/x-tree-view`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `SimpleTreeView` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–µ—Ä–µ–≤–∞
- `TreeItem` - —ç–ª–µ–º–µ–Ω—Ç—ã –¥–µ—Ä–µ–≤–∞

---

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –§–∞–∑—ã 2

**TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è:**
- ‚úÖ –í—Å–µ –æ—à–∏–±–∫–∏ —Ç–∏–ø–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚úÖ Build —É—Å–ø–µ—à–µ–Ω (`npm run build`)
- ‚úÖ Bundle size: 1,261 KB (warning –æ —Ä–∞–∑–º–µ—Ä–µ - –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è MVP)

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ TypeScript –æ—à–∏–±–∫–∏:**
1. `TreeView` ‚Üí `SimpleTreeView` (MUI v7 API)
2. `nodeId` ‚Üí `itemId` (MUI v7 API)
3. `onNodeToggle` ‚Üí `onExpandedItemsChange` (MUI v7 API)
4. –°–∏–≥–Ω–∞—Ç—É—Ä–∞ handler: –¥–æ–±–∞–≤–ª–µ–Ω `| null` –≤ —Ç–∏–ø–µ —Å–æ–±—ã—Ç–∏—è
5. –£–¥–∞–ª–µ–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π `refresh` –∏–∑ useRefresh

**HMR (Hot Module Replacement):**
- ‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚úÖ Dev —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

**–†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
1. ‚úÖ –í–æ–π—Ç–∏ –∫–∞–∫ SUPER_ADMIN (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–ª–∏)
2. ‚úÖ –ü—É–Ω–∫—Ç "–£—á–µ–±–Ω–∏–∫–∏" –≤–∏–¥–∏–º –≤ –º–µ–Ω—é
3. –û—Ç–∫—Ä—ã—Ç—å —É—á–µ–±–Ω–∏–∫ ‚Üí –≤–∫–ª–∞–¥–∫–∞ "–†–µ–¥–∞–∫—Ç–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã"
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:
   - [ ] –°–æ–∑–¥–∞–Ω–∏–µ –≥–ª–∞–≤—ã (–≤—Å–µ –ø–æ–ª—è)
   - [ ] –†–∞—Å–∫—Ä—ã—Ç–∏–µ —É–∑–ª–∞ –≥–ª–∞–≤—ã (lazy loading –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤)
   - [ ] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–ª–∞–≤—ã
   - [ ] –£–¥–∞–ª–µ–Ω–∏–µ –≥–ª–∞–≤—ã (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ)
   - [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–π

---

## üìÅ –§–∞–∑–∞ 3: Rich Text Editor –¥–ª—è –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤ (–î–ï–¢–ê–õ–¨–ù–û)

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

#### 1. `frontend/src/pages/textbooks/ParagraphCreateDialog.tsx`
**–†–∞–∑–º–µ—Ä:** ~240 —Å—Ç—Ä–æ–∫
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Modal –¥–∏–∞–ª–æ–≥ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞

**–§–æ—Ä–º–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç:**
```typescript
interface ParagraphFormData {
  title: string;              // –ù–∞–∑–≤–∞–Ω–∏–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  number: number;             // –ù–æ–º–µ—Ä –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, >= 1)
  order: number;              // –ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, >= 1)
  content: string;            // –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, textarea)
  summary: string;            // –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  learning_objective: string; // –¶–µ–ª—å –æ–±—É—á–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  lesson_objective: string;   // –¶–µ–ª—å —É—Ä–æ–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
}
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- title: required, maxLength(255)
- number: >= 1
- order: >= 1
- content: required (–±–∞–∑–æ–≤—ã–π textarea, –ë–ï–ó Rich Text –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è)

**API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- Method: POST
- Endpoint: `/api/v1/admin/global/paragraphs`
- Headers: Authorization Bearer token
- Body: JSON payload —Å chapter_id

**Flow:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∑–µ–ª–µ–Ω—É—é –∫–Ω–æ–ø–∫—É "+" –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –≥–ª–∞–≤—ã
2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è dialog —Å –ø—É—Å—Ç–æ–π —Ñ–æ—Ä–º–æ–π
3. –ó–∞–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª—è –∏ –Ω–∞–∂–∏–º–∞–µ—Ç "–°–æ–∑–¥–∞—Ç—å"
4. –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ backend
5. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ + –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤ –≥–ª–∞–≤—ã + –∑–∞–∫—Ä—ã—Ç–∏–µ –¥–∏–∞–ª–æ–≥–∞
6. –ü—Ä–∏ –æ—à–∏–±–∫–µ: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ

---

#### 2. `frontend/src/pages/textbooks/ParagraphEditorDialog.tsx`
**–†–∞–∑–º–µ—Ä:** ~450 —Å—Ç—Ä–æ–∫
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Fullscreen –¥–∏–∞–ª–æ–≥ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞ —Å Rich Text Editor

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- **Fullscreen Dialog** (MUI) - –∑–∞–Ω–∏–º–∞–µ—Ç –≤–µ—Å—å —ç–∫—Ä–∞–Ω
- **AppBar** —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –∏ –∫–Ω–æ–ø–∫–∞–º–∏ –¥–µ–π—Å—Ç–≤–∏–π
- **TinyMCE Rich Text Editor** - –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **Metadata form** - —Ñ–æ—Ä–º–∞ —Å –ø–æ–ª—è–º–∏ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞
- **Preview —Ä–µ–∂–∏–º** - –ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ HTML

**State management:**
```typescript
const [paragraph, setParagraph] = useState<Paragraph | null>(null);
const [content, setContent] = useState<string>('');
const [metadata, setMetadata] = useState<ParagraphMetadata>({
  title: '', number: 1, order: 1,
  summary: '', learning_objective: '', lesson_objective: ''
});
const [loading, setLoading] = useState(true);
const [saving, setSaving] = useState(false);
const [lastSaved, setLastSaved] = useState<Date | null>(null);
const [previewMode, setPreviewMode] = useState(false);
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞:**
   - Endpoint: GET `/api/v1/admin/global/paragraphs/{id}`
   - –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –¥–∏–∞–ª–æ–≥–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π –ø–∞—Ä–∞–≥—Ä–∞—Ñ
   - Metadata –∏ content –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –∏–∑ –æ—Ç–≤–µ—Ç–∞

2. **Auto-save content:**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `use-debounce` —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 30 —Å–µ–∫—É–Ω–¥
   - –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è content
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ content –ø–æ–ª–µ (PUT request)
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ..." ‚Üí "–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ HH:MM:SS"

3. **Manual save:**
   - –ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" –≤ AppBar
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –í–°–ï –ø–æ–ª—è (metadata + content)
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç chip "–ï—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è" –¥–ª—è metadata

4. **Preview —Ä–µ–∂–∏–º:**
   - Toggle –∫–Ω–æ–ø–∫–∞ "–ü—Ä–µ–≤—å—é" / "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" –≤ AppBar
   - Preview: `dangerouslySetInnerHTML` —Å content
   - –°—Ç–∏–ª–∏: border, padding, –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ 500px

5. **TinyMCE –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
   ```typescript
   init={{
     height: 500,
     menubar: false,
     plugins: [
       'advlist', 'autolink', 'lists', 'link', 'image',
       'charmap', 'preview', 'anchor', 'searchreplace',
       'visualblocks', 'code', 'fullscreen', 'insertdatetime',
       'media', 'table', 'help', 'wordcount'
     ],
     toolbar:
       'undo redo | blocks | bold italic underline strikethrough | ' +
       'alignleft aligncenter alignright alignjustify | ' +
       'bullist numlist outdent indent | ' +
       'link image table | forecolor backcolor | ' +
       'removeformat | code preview | help',
     content_style: 'body { font-family: Arial, sans-serif; font-size: 14px; }',
     branding: false
   }}
   ```

**AppBar –∫–Ω–æ–ø–∫–∏:**
- **–ü—Ä–µ–≤—å—é/–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å** - toggle preview —Ä–µ–∂–∏–º–∞
- **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å** - manual save –≤—Å–µ—Ö –ø–æ–ª–µ–π
- **–ó–∞–∫—Ä—ã—Ç—å** (X) - –∑–∞–∫—Ä—ã—Ç–∏–µ –¥–∏–∞–ª–æ–≥–∞

**Status indicator (—Å–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É):**
- CircularProgress + "–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ..." - –≤–æ –≤—Ä–µ–º—è auto-save
- "–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ HH:MM:SS" - –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- Warning Chip "–ï—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è" - –µ—Å–ª–∏ metadata –∏–∑–º–µ–Ω–∏–ª–∞—Å—å

---

#### 3. `frontend/src/pages/textbooks/TextbookStructureEditor.tsx` (–æ–±–Ω–æ–≤–ª–µ–Ω)
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:** +120 —Å—Ç—Ä–æ–∫

**–î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã:**
```typescript
import { ParagraphCreateDialog } from './ParagraphCreateDialog';
import { ParagraphEditorDialog } from './ParagraphEditorDialog';
```

**–ù–æ–≤—ã–π state:**
```typescript
// –î–∏–∞–ª–æ–≥–∏ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤
const [paragraphCreateDialogOpen, setParagraphCreateDialogOpen] = useState(false);
const [paragraphEditDialogOpen, setParagraphEditDialogOpen] = useState(false);
const [selectedParagraph, setSelectedParagraph] = useState<Paragraph | null>(null);
const [selectedChapterId, setSelectedChapterId] = useState<number | null>(null);
```

**–ù–æ–≤—ã–µ handlers:**
```typescript
// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞
const handleAddParagraph = (chapterId: number) => {
  setSelectedChapterId(chapterId);
  setParagraphCreateDialogOpen(true);
};

// –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞
const handleEditParagraph = (paragraph: Paragraph) => {
  setSelectedParagraph(paragraph);
  setParagraphEditDialogOpen(true);
};

// –£–¥–∞–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞
const handleDeleteParagraph = async (paragraphId: number, chapterId: number) => {
  if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –ø–∞—Ä–∞–≥—Ä–∞—Ñ?')) return;
  // DELETE request
  // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤ –≥–ª–∞–≤—ã
};
```

**UI –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

1. **–ö–∞—Ä—Ç–æ—á–∫–∞ –≥–ª–∞–≤—ã:**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–≥—Ä–∞—Ñ" (–∑–µ–ª–µ–Ω–∞—è, AddIcon)
   - –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∞ —Ä—è–¥–æ–º —Å Edit/Delete –∫–Ω–æ–ø–∫–∞–º–∏ –≥–ª–∞–≤—ã

2. **TreeItem –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞:**
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–Ω–æ–ø–∫–∏ Edit (—Å–∏–Ω—è—è) –∏ Delete (–∫—Ä–∞—Å–Ω–∞—è)
   - Layout: flex —Å `justifyContent: space-between`
   - –õ–µ–≤–∞—è —á–∞—Å—Ç—å: –Ω–æ–º–µ—Ä, –Ω–∞–∑–≤–∞–Ω–∏–µ, summary
   - –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å: –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π

3. **–î–∏–∞–ª–æ–≥–∏:**
   ```typescript
   {selectedChapterId && (
     <ParagraphCreateDialog
       open={paragraphCreateDialogOpen}
       chapterId={selectedChapterId}
       onClose={handleParagraphDialogClose}
       onSuccess={handleParagraphSuccess}
     />
   )}

   {selectedParagraph && (
     <ParagraphEditorDialog
       open={paragraphEditDialogOpen}
       paragraphId={selectedParagraph.id}
       onClose={handleParagraphDialogClose}
       onSuccess={handleParagraphSuccess}
     />
   )}
   ```

---

#### 4. `frontend/src/pages/textbooks/index.ts` (–æ–±–Ω–æ–≤–ª–µ–Ω)
**–î–æ–±–∞–≤–ª–µ–Ω—ã —ç–∫—Å–ø–æ—Ä—Ç—ã:**
```typescript
export { ParagraphCreateDialog } from './ParagraphCreateDialog';
export { ParagraphEditorDialog } from './ParagraphEditorDialog';
```

---

### –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

#### `@tinymce/tinymce-react`
**–í–µ—Ä—Å–∏—è:** 6.3.0
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è TinyMCE Rich Text Editor
**–ö–æ–º–∞–Ω–¥–∞:** `npm install @tinymce/tinymce-react`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- CDN —Ä–µ–∂–∏–º (no-api-key) –¥–ª—è localhost
- Self-hosted TinyMCE –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –ø–ª–∞–≥–∏–Ω–æ–≤ TinyMCE

#### `use-debounce`
**–í–µ—Ä—Å–∏—è:** 10.0.6
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** React hook –¥–ª—è debouncing –∑–Ω–∞—á–µ–Ω–∏–π
**–ö–æ–º–∞–Ω–¥–∞:** `npm install use-debounce`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
import { useDebounce } from 'use-debounce';

const [content, setContent] = useState('');
const [debouncedContent] = useDebounce(content, 30000); // 30 —Å–µ–∫—É–Ω–¥

useEffect(() => {
  if (debouncedContent) {
    autoSaveContent(debouncedContent);
  }
}, [debouncedContent]);
```

---

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ backend –±–∞–≥–∞

#### –ü—Ä–æ–±–ª–µ–º–∞: 405 Method Not Allowed
–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞ (–∫–ª–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫—É Edit) –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```
Failed to load resource: the server responded with a status of 405 (Method Not Allowed)
GET /api/v1/admin/global/paragraphs/8
```

**–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞ –ø–æ ID.

**–°—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∏ —Ç–æ–ª—å–∫–æ:**
- GET `/chapters/{chapter_id}/paragraphs` - —Å–ø–∏—Å–æ–∫ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤
- POST `/paragraphs` - —Å–æ–∑–¥–∞–Ω–∏–µ
- PUT `/paragraphs/{paragraph_id}` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- DELETE `/paragraphs/{paragraph_id}` - —É–¥–∞–ª–µ–Ω–∏–µ

**–û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª:**
- ‚ùå GET `/paragraphs/{paragraph_id}` - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞

#### –†–µ—à–µ–Ω–∏–µ

**–î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π endpoint –≤ `backend/app/api/v1/admin_global.py`:**

```python
@router.get("/paragraphs/{paragraph_id}", response_model=ParagraphResponse)
async def get_global_paragraph(
    paragraph_id: int,
    current_user: User = Depends(require_super_admin),
    db: AsyncSession = Depends(get_db)
):
    """
    Get a single paragraph by ID (SUPER_ADMIN only).

    Verifies that the paragraph belongs to a global textbook.
    """
    paragraph_repo = ParagraphRepository(db)
    chapter_repo = ChapterRepository(db)
    textbook_repo = TextbookRepository(db)

    # Get paragraph
    paragraph = await paragraph_repo.get_by_id(paragraph_id)
    if not paragraph:
        raise HTTPException(
            status_code=status.HTTP_404_NOT_FOUND,
            detail=f"Paragraph {paragraph_id} not found"
        )

    # Verify it belongs to a global textbook
    chapter = await chapter_repo.get_by_id(paragraph.chapter_id)
    if not chapter:
        raise HTTPException(
            status_code=status.HTTP_404_NOT_FOUND,
            detail=f"Chapter {paragraph.chapter_id} not found"
        )

    textbook = await textbook_repo.get_by_id(chapter.textbook_id)
    if textbook and textbook.school_id is not None:
        raise HTTPException(
            status_code=status.HTTP_403_FORBIDDEN,
            detail="This is not a global paragraph. Use school admin endpoints."
        )

    return paragraph
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ endpoint:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (SUPER_ADMIN only)
- –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç, —á—Ç–æ –ø–∞—Ä–∞–≥—Ä–∞—Ñ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–º—É —É—á–µ–±–Ω–∏–∫—É
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–π –æ–±—ä–µ–∫—Ç –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞ —Å–æ –≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏
- HTTP 404 –µ—Å–ª–∏ –ø–∞—Ä–∞–≥—Ä–∞—Ñ –∏–ª–∏ –≥–ª–∞–≤–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
- HTTP 403 –µ—Å–ª–∏ –ø–∞—Ä–∞–≥—Ä–∞—Ñ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —à–∫–æ–ª—å–Ω–æ–º—É —É—á–µ–±–Ω–∏–∫—É

**–°—Ç–∞—Ç—É—Å:** ‚úÖ Endpoint –¥–æ–±–∞–≤–ª–µ–Ω, backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏–ª—Å—è (--reload —Ä–µ–∂–∏–º)

---

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –§–∞–∑—ã 3

**TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è:**
- ‚úÖ –í—Å–µ –æ—à–∏–±–∫–∏ —Ç–∏–ø–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚úÖ Build —É—Å–ø–µ—à–µ–Ω (`npm run build`)
- ‚úÖ Bundle size: 1,294 KB (—É–≤–µ–ª–∏—á–∏–ª—Å—è –Ω–∞ ~32 KB –∏–∑-–∑–∞ TinyMCE + use-debounce)
- ‚úÖ 2415 –º–æ–¥—É–ª–µ–π —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ
- ‚úÖ –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏: 2.22s

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏:**
1. –£–¥–∞–ª–µ–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∏–º–ø–æ—Ä—Ç `DialogTitle` –≤ ParagraphEditorDialog
2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –≤ AppBar.tsx —Å `ToggleThemeButton` props (—É–¥–∞–ª–µ–Ω—ã lightTheme/darkTheme)
3. –î–æ–±–∞–≤–ª–µ–Ω backend endpoint GET `/paragraphs/{paragraph_id}`

**–°–µ—Ä–≤–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã:**
- ‚úÖ Backend API –Ω–∞ –ø–æ—Ä—Ç—É 8000 (uvicorn --reload)
- ‚úÖ Frontend dev server –Ω–∞ –ø–æ—Ä—Ç—É 5174 (Vite)
- ‚úÖ PostgreSQL (healthy, up 2 days)

**–†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
1. –í–æ–π—Ç–∏ –∫–∞–∫ SUPER_ADMIN
2. –û—Ç–∫—Ä—ã—Ç—å —É—á–µ–±–Ω–∏–∫ ‚Üí –≤–∫–ª–∞–¥–∫–∞ "–†–µ–¥–∞–∫—Ç–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã"
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:
   - [ ] –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞ —á–µ—Ä–µ–∑ dialog
   - [ ] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞ –≤ Fullscreen Editor
   - [ ] TinyMCE —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞, —Å–ø–∏—Å–∫–∏, —Ç–∞–±–ª–∏—Ü—ã)
   - [ ] Auto-save —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —á–µ—Ä–µ–∑ 30 —Å–µ–∫ (–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ")
   - [ ] Preview —Ä–µ–∂–∏–º –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç HTML –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - [ ] Manual save —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç metadata
   - [ ] –£–¥–∞–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üìÅ –§–∞–∑–∞ 4: LaTeX —Ñ–æ—Ä–º—É–ª—ã + Upload —Ñ–∞–π–ª–æ–≤ (–î–ï–¢–ê–õ–¨–ù–û)

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

#### 1. `frontend/src/components/MathFormulaDialog.tsx`
**–†–∞–∑–º–µ—Ä:** ~180 —Å—Ç—Ä–æ–∫
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Fullscreen dialog –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ LaTeX —Ñ–æ—Ä–º—É–ª —Å live preview

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- **Dialog** (fullScreen) - –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
- **AppBar** —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –∏ –∫–Ω–æ–ø–∫–æ–π –∑–∞–∫—Ä—ã—Ç–∏—è
- **TextField** - –≤–≤–æ–¥ LaTeX –∫–æ–¥–∞ (multiline, monospace font)
- **Preview –±–ª–æ–∫** - live —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ñ–æ—Ä–º—É–ª—ã —á–µ—Ä–µ–∑ KaTeX
- **Tabs** - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É Inline –∏ Display —Ä–µ–∂–∏–º–∞–º–∏
- **Examples** - 8 –≥–æ—Ç–æ–≤—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ —Ñ–æ—Ä–º—É–ª

**State management:**
```typescript
const [latex, setLatex] = useState<string>('');
const [displayMode, setDisplayMode] = useState<boolean>(false);
const [renderError, setRenderError] = useState<string | null>(null);
const previewRef = useRef<HTMLDivElement>(null);
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
1. **Live Preview** - —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ñ–æ—Ä–º—É–ª—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   ```typescript
   useEffect(() => {
     if (!previewRef.current || !latex.trim()) return;
     try {
       katex.render(latex, previewRef.current, {
         throwOnError: true,
         displayMode: displayMode,
       });
       setRenderError(null);
     } catch (error: any) {
       setRenderError(error.message);
     }
   }, [latex, displayMode]);
   ```

2. **–î–≤–∞ —Ä–µ–∂–∏–º–∞:**
   - **Inline** (;latex;) - —Ñ–æ—Ä–º—É–ª–∞ –≤ —Å—Ç—Ä–æ–∫–µ —Ç–µ–∫—Å—Ç–∞
   - **Display** ($$latex$$) - —Ñ–æ—Ä–º—É–ª–∞ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ, —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ

3. **8 –ø—Ä–∏–º–µ—Ä–æ–≤ —Ñ–æ—Ä–º—É–ª:**
   - –ö–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ: `x = \frac{-b \pm \sqrt{b^2-4ac}}{2a}`
   - –î—Ä–æ–±–∏: `\frac{a}{b}`
   - –°—Ç–µ–ø–µ–Ω–∏/–∏–Ω–¥–µ–∫—Å—ã: `x^2`, `x_i`
   - –ö–æ—Ä–Ω–∏: `\sqrt{x}`, `\sqrt[n]{x}`
   - –ò–Ω—Ç–µ–≥—Ä–∞–ª—ã: `\int_{a}^{b} f(x) dx`
   - –°—É–º–º—ã: `\sum_{i=1}^{n} x_i`
   - –ì—Ä–µ—á–µ—Å–∫–∏–µ –±—É–∫–≤—ã: `\alpha`, `\beta`, `\gamma`
   - –ú–∞—Ç—Ä–∏—Ü—ã: `\begin{pmatrix} a & b \\ c & d \end{pmatrix}`

4. **–í—Å—Ç–∞–≤–∫–∞ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä:**
   - –ö–Ω–æ–ø–∫–∞ "–í—Å—Ç–∞–≤–∏—Ç—å" –≤—ã–∑—ã–≤–∞–µ—Ç `onInsert(latex, displayMode)`
   - –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥ –ø–æ—Å–ª–µ –≤—Å—Ç–∞–≤–∫–∏

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ú–æ–Ω–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç –¥–ª—è LaTeX –∫–æ–¥–∞
- Error handling —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π –∫—Ä–∞—Å–Ω—ã–º —Ü–≤–µ—Ç–æ–º
- Responsive layout —Å Grid –∏ Cards
- –ü—Ä–∏–º–µ—Ä—ã –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã - –∑–∞–ø–æ–ª–Ω—è—é—Ç –ø–æ–ª–µ –≤–≤–æ–¥–∞

---

#### 2. `frontend/src/utils/tinymce-math-plugin.ts`
**–†–∞–∑–º–µ—Ä:** ~100 —Å—Ç—Ä–æ–∫
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Custom TinyMCE plugin –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å LaTeX —Ñ–æ—Ä–º—É–ª–∞–º–∏

**–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

1. **setupMathPlugin** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ –≤ TinyMCE toolbar
   ```typescript
   export const setupMathPlugin = (editor: Editor, callbacks: MathPluginCallbacks) => {
     editor.ui.registry.addButton('math', {
       text: 'Œ£',
       tooltip: '–í—Å—Ç–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É–ª—É (LaTeX)',
       onAction: () => {
         callbacks.onOpenDialog();
       },
     });
   };
   ```

2. **insertMathFormula** - –≤—Å—Ç–∞–≤–∫–∞ —Ñ–æ—Ä–º—É–ª—ã –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä
   ```typescript
   export const insertMathFormula = (
     editor: Editor,
     latex: string,
     displayMode: boolean
   ) => {
     const className = displayMode ? 'math-tex display-mode' : 'math-tex';
     const delimiter = displayMode ? '$' : ';
     const html = `<span class="${className}" data-latex="${escapeHtml(latex)}">${delimiter}${escapeHtml(latex)}${delimiter}</span>`;
     editor.insertContent(html);
   };
   ```

3. **extractLatexFromElement** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ LaTeX –∫–æ–¥–∞ –∏–∑ HTML —ç–ª–µ–º–µ–Ω—Ç–∞
   ```typescript
   export const extractLatexFromElement = (element: HTMLElement): string | null => {
     const latexData = element.getAttribute('data-latex');
     if (latexData) return latexData;

     const text = element.textContent || '';
     const displayMatch = text.match(/^\$\$(.*)\$\$$/);
     if (displayMatch) return displayMatch[1];

     const inlineMatch = text.match(/^\$(.*)\$$/);
     if (inlineMatch) return inlineMatch[1];

     return null;
   };
   ```

**–§–æ—Ä–º–∞—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º—É–ª:**
- HTML: `<span class="math-tex" data-latex="x^2">$x^2$</span>`
- –ê—Ç—Ä–∏–±—É—Ç `data-latex` —Å–æ–¥–µ—Ä–∂–∏—Ç —á–∏—Å—Ç—ã–π LaTeX –∫–æ–¥
- –í–∏–¥–∏–º—ã–π —Ç–µ–∫—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ–æ—Ä–º—É–ª—É —Å delimiters ($ –∏–ª–∏ $$)
- CSS –∫–ª–∞—Å—Å `.math-tex` –¥–ª—è styling
- CSS –∫–ª–∞—Å—Å `.display-mode` –¥–ª—è block —Ñ–æ—Ä–º—É–ª

**Type definitions:**
```typescript
export interface MathPluginCallbacks {
  onOpenDialog: () => void;
}

type Editor = any; // TinyMCE Editor type
```

---

#### 3. `frontend/src/styles/katex-custom.css`
**–†–∞–∑–º–µ—Ä:** ~40 —Å—Ç—Ä–æ–∫
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è KaTeX —Ñ–æ—Ä–º—É–ª

**–°—Ç–∏–ª–∏:**

1. **Inline —Ñ–æ—Ä–º—É–ª—ã** (–≤ —Å—Ç—Ä–æ–∫–µ —Ç–µ–∫—Å—Ç–∞):
   ```css
   .math-tex {
     display: inline-block;
     vertical-align: middle;
     padding: 0 4px;
   }
   ```

2. **Display —Ñ–æ—Ä–º—É–ª—ã** (–æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞):
   ```css
   .math-tex.display-mode {
     display: block;
     text-align: center;
     margin: 1em 0;
     padding: 0.5em 0;
   }
   ```

3. **Hover —ç—Ñ—Ñ–µ–∫—Ç** –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã—Ö —Ñ–æ—Ä–º—É–ª:
   ```css
   .math-tex:hover {
     background-color: #f0f0f0;
     border-radius: 4px;
     cursor: pointer;
   }
   ```

4. **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ hover –¥–ª—è display mode** –≤ TinyMCE:
   ```css
   .mce-content-body .math-tex.display-mode:hover {
     background-color: transparent;
     cursor: default;
   }
   ```

5. **–°—Ç–∏–ª–∏ –¥–ª—è preview —Ä–µ–∂–∏–º–∞:**
   ```css
   .preview-content .math-tex {
     padding: 0 2px;
   }

   .preview-content .math-tex.display-mode {
     margin: 1.5em 0;
   }
   ```

---

#### 4. `backend/app/services/upload_service.py`
**–†–∞–∑–º–µ—Ä:** ~240 —Å—Ç—Ä–æ–∫
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–µ—Ä–≤–∏—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ PDF)

**–ö–ª–∞—Å—Å UploadService:**

**–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:**
```python
ALLOWED_IMAGE_TYPES = ["image/jpeg", "image/png", "image/webp", "image/gif"]
ALLOWED_PDF_TYPES = ["application/pdf"]
MAX_IMAGE_SIZE = 5 * 1024 * 1024  # 5 MB
MAX_PDF_SIZE = 50 * 1024 * 1024   # 50 MB
```

**–ú–µ—Ç–æ–¥—ã:**

1. **save_image** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
   ```python
   async def save_image(
       self,
       file: UploadFile,
       max_size: Optional[int] = None,
   ) -> str:
       """
       Returns: URL –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: "/uploads/abc123_20231030_150000.jpg")
       """
       max_size = max_size or self.MAX_IMAGE_SIZE
       self._validate_file(file, self.ALLOWED_IMAGE_TYPES, max_size)
       file_content = await file.read()
       filename = self._generate_filename(file.filename or "image.jpg")
       file_path = self.upload_dir / filename

       with open(file_path, "wb") as f:
           f.write(file_content)

       return f"/{self.upload_dir}/{filename}"
   ```

2. **save_pdf** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ PDF —Ñ–∞–π–ª–∞
   - –ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å PDF –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
   - MAX_PDF_SIZE = 50 MB

3. **_validate_file** - –≤–∞–ª–∏–¥–∞—Ü–∏—è MIME —Ç–∏–ø–∞ –∏ —Ä–∞–∑–º–µ—Ä–∞
   ```python
   def _validate_file(
       self,
       file: UploadFile,
       allowed_types: list[str],
       max_size: int,
   ) -> None:
       if file.content_type not in allowed_types:
           raise HTTPException(400, f"–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ç–∏–ø —Ñ–∞–π–ª–∞: {file.content_type}")

       if file.size and file.size > max_size:
           raise HTTPException(400, f"–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π: {file.size / 1024 / 1024:.2f} MB")
   ```

4. **_generate_filename** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –∏–º–µ–Ω–∏
   ```python
   def _generate_filename(self, original_filename: str) -> str:
       """
       –§–æ—Ä–º–∞—Ç: {uuid}_{timestamp}{extension}
       –ü—Ä–∏–º–µ—Ä: "a1b2c3d4_20231030_150000.jpg"
       """
       file_ext = Path(original_filename).suffix.lower()
       unique_id = str(uuid.uuid4())[:8]
       timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
       return f"{unique_id}_{timestamp}{file_ext}"
   ```

5. **delete_file** - —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - –î–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç URL, –∏–∑–≤–ª–µ–∫–∞–µ—Ç filename, —É–¥–∞–ª—è–µ—Ç —Ñ–∞–π–ª

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Async –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å FastAPI
- HTTPException –¥–ª—è –æ—à–∏–±–æ–∫ (400, 500)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ uploads
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ (UUID + timestamp)

---

#### 5. `backend/app/schemas/upload.py`
**–†–∞–∑–º–µ—Ä:** ~30 —Å—Ç—Ä–æ–∫
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Pydantic schemas –¥–ª—è Upload API responses

**–°—Ö–µ–º—ã:**

1. **ImageUploadResponse:**
   ```python
   class ImageUploadResponse(BaseModel):
       url: str = Field(..., description="URL –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è")
       filename: str = Field(..., description="–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞")
       size: int = Field(..., description="–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö")
       mime_type: str = Field(..., description="MIME —Ç–∏–ø —Ñ–∞–π–ª–∞")

       model_config = {"from_attributes": True}
   ```

2. **PDFUploadResponse:**
   ```python
   class PDFUploadResponse(BaseModel):
       url: str = Field(..., description="URL –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ PDF")
       filename: str = Field(..., description="–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞")
       size: int = Field(..., description="–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö")

       model_config = {"from_attributes": True}
   ```

---

#### 6. `backend/app/api/v1/upload.py`
**–†–∞–∑–º–µ—Ä:** ~80 —Å—Ç—Ä–æ–∫
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** FastAPI router –¥–ª—è upload endpoints

**Endpoints:**

1. **POST `/api/v1/upload/image`** - –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
   ```python
   @router.post("/image", response_model=ImageUploadResponse)
   async def upload_image(
       file: UploadFile = File(...),
       current_user: User = Depends(require_super_admin),
   ):
       """
       Upload an image file (SUPER_ADMIN only).

       Accepts: JPEG, PNG, WebP, GIF
       Max size: 5 MB
       Returns: URL to access the uploaded image
       """
       url = await upload_service.save_image(file)

       return ImageUploadResponse(
           url=url,
           filename=file.filename or "unknown",
           size=file.size or 0,
           mime_type=file.content_type or "unknown",
       )
   ```

2. **POST `/api/v1/upload/pdf`** - –∑–∞–≥—Ä—É–∑–∫–∞ PDF
   ```python
   @router.post("/pdf", response_model=PDFUploadResponse)
   async def upload_pdf(
       file: UploadFile = File(...),
       current_user: User = Depends(require_super_admin),
   ):
       """
       Upload a PDF file (SUPER_ADMIN only).

       Accepts: PDF
       Max size: 50 MB
       Returns: URL to access the uploaded PDF
       """
       url = await upload_service.save_pdf(file)

       return PDFUploadResponse(
           url=url,
           filename=file.filename or "unknown",
           size=file.size or 0,
       )
   ```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –¢—Ä–µ–±—É—é—Ç SUPER_ADMIN –ø—Ä–∞–≤–∞ (—á–µ—Ä–µ–∑ `require_super_admin` dependency)
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç FastAPI `File(...)` –¥–ª—è multipart/form-data
- –í–æ–∑–≤—Ä–∞—â–∞—é—Ç structured response —Å URL, filename, size, mime_type
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ HTTPException –∏–∑ UploadService

**Singleton instance:**
```python
upload_service = UploadService(upload_dir=settings.UPLOAD_DIR)
```

---

#### 7. `uploads/.gitkeep`
**–†–∞–∑–º–µ—Ä:** 0 –±–∞–π—Ç
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—É—Å—Ç–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ uploads –≤ git

---

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

#### 1. `frontend/src/pages/textbooks/ParagraphEditorDialog.tsx` (–æ–±–Ω–æ–≤–ª–µ–Ω)
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:** +80 —Å—Ç—Ä–æ–∫

**–î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã:**
```typescript
import katex from 'katex';
import 'katex/dist/katex.min.css';
import '../../styles/katex-custom.css';
import { MathFormulaDialog } from '../../components/MathFormulaDialog';
import { setupMathPlugin, insertMathFormula } from '../../utils/tinymce-math-plugin';
```

**–ù–æ–≤—ã–π state –¥–ª—è Math Dialog:**
```typescript
const [mathDialogOpen, setMathDialogOpen] = useState(false);
const [editorRef, setEditorRef] = useState<TinyMCEEditor | null>(null);
```

**TinyMCE setup —Å math plugin:**
```typescript
setup: (editor: TinyMCEEditor) => {
  setEditorRef(editor);

  // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è math plugin
  setupMathPlugin(editor, {
    onOpenDialog: () => setMathDialogOpen(true),
  });
},
```

**TinyMCE toolbar –æ–±–Ω–æ–≤–ª–µ–Ω:**
```typescript
toolbar:
  'undo redo | blocks | bold italic underline strikethrough | ' +
  'alignleft aligncenter alignright alignjustify | ' +
  'bullist numlist outdent indent | ' +
  'link image table | forecolor backcolor | ' +
  'math | ' +  // –ù–û–í–ê–Ø –ö–ù–û–ü–ö–ê
  'removeformat | code preview | help',
```

**Image upload handler:**
```typescript
images_upload_handler: async (blobInfo, _progress) => {
  const formData = new FormData();
  formData.append('file', blobInfo.blob(), blobInfo.filename());

  const token = getAuthToken();
  const response = await fetch(`${API_URL}/upload/image`, {
    method: 'POST',
    headers: {
      Authorization: `Bearer ${token}`,
    },
    body: formData,
  });

  if (!response.ok) {
    throw new Error('Image upload failed');
  }

  const data = await response.json();
  return `http://localhost:8000${data.url}`;
},
```

**KaTeX rendering –≤ Preview mode:**
```typescript
useEffect(() => {
  if (previewMode && previewRef.current) {
    // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≤—Å–µ—Ö —Ñ–æ—Ä–º—É–ª —Å –∫–ª–∞—Å—Å–æ–º .math-tex
    const mathElements = previewRef.current.querySelectorAll('.math-tex');
    mathElements.forEach((element) => {
      const latexCode = element.textContent?.replace(/^\$\$?/, '').replace(/\$\$?$/, '') || '';
      const displayMode = element.classList.contains('display-mode');

      try {
        katex.render(latexCode, element as HTMLElement, {
          throwOnError: false,
          displayMode: displayMode,
        });
      } catch (error) {
        console.error('KaTeX render error:', error);
      }
    });
  }
}, [previewMode, content]);
```

**Math Dialog –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:**
```typescript
<MathFormulaDialog
  open={mathDialogOpen}
  onClose={() => setMathDialogOpen(false)}
  onInsert={(latex, displayMode) => {
    if (editorRef) {
      insertMathFormula(editorRef, latex, displayMode);
    }
    setMathDialogOpen(false);
  }}
/>
```

---

#### 2. `frontend/src/components/index.ts` (–æ–±–Ω–æ–≤–ª–µ–Ω)
**–î–æ–±–∞–≤–ª–µ–Ω —ç–∫—Å–ø–æ—Ä—Ç:**
```typescript
export { MathFormulaDialog } from './MathFormulaDialog';
```

---

#### 3. `frontend/package.json` (–æ–±–Ω–æ–≤–ª–µ–Ω)
**–î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```json
"dependencies": {
  "katex": "^0.16.21",
  "@types/katex": "^0.16.9"
},
"devDependencies": {
  "tinymce": "^7.6.0"
}
```

**–ö–æ–º–∞–Ω–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
```bash
npm install katex @types/katex
npm install --save-dev tinymce
```

---

#### 4. `backend/app/services/__init__.py` (–æ–±–Ω–æ–≤–ª–µ–Ω)
**–î–æ–±–∞–≤–ª–µ–Ω —ç–∫—Å–ø–æ—Ä—Ç:**
```python
from .upload_service import UploadService

__all__ = ["UploadService"]
```

---

#### 5. `backend/app/schemas/__init__.py` (–æ–±–Ω–æ–≤–ª–µ–Ω)
**–î–æ–±–∞–≤–ª–µ–Ω—ã —ç–∫—Å–ø–æ—Ä—Ç—ã:**
```python
from .upload import ImageUploadResponse, PDFUploadResponse

__all__ = [
    # ... existing exports
    "ImageUploadResponse",
    "PDFUploadResponse",
]
```

---

#### 6. `backend/app/core/config.py` (–æ–±–Ω–æ–≤–ª–µ–Ω)
**–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ upload:**
```python
# File Uploads
UPLOAD_DIR: str = "uploads"
MAX_IMAGE_SIZE_MB: int = 5
MAX_PDF_SIZE_MB: int = 50
ALLOWED_IMAGE_TYPES: list[str] = ["image/jpeg", "image/png", "image/webp", "image/gif"]
```

---

#### 7. `backend/app/main.py` (–æ–±–Ω–æ–≤–ª–µ–Ω)
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:** +15 —Å—Ç—Ä–æ–∫

**–î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã:**
```python
from fastapi.staticfiles import StaticFiles
from pathlib import Path
```

**–°–æ–∑–¥–∞–Ω–∏–µ uploads –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ:**
```python
# Create uploads directory on startup
upload_dir = Path(settings.UPLOAD_DIR)
upload_dir.mkdir(parents=True, exist_ok=True)
```

**Mount StaticFiles –¥–ª—è —Ä–∞–∑–¥–∞—á–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:**
```python
# Mount static files –¥–ª—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ PDF
upload_dir_path = Path(settings.UPLOAD_DIR)
if upload_dir_path.exists():
    app.mount(
        f"/{settings.UPLOAD_DIR}",
        StaticFiles(directory=str(upload_dir_path)),
        name="uploads"
    )
```

**Include upload router:**
```python
from app.api.v1 import upload

app.include_router(
    upload.router,
    prefix=f"{settings.API_V1_PREFIX}/upload",
    tags=["Upload"]
)
```

---

#### 8. `docker-compose.yml` (–æ–±–Ω–æ–≤–ª–µ–Ω)
**–î–æ–±–∞–≤–ª–µ–Ω volume –¥–ª—è uploads:**
```yaml
backend:
  volumes:
    - ./backend:/app/backend
    - ./docs:/app/docs
    - ./uploads:/app/uploads  # –ù–û–í–´–ô VOLUME
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

---

#### 9. `.gitignore` (–æ–±–Ω–æ–≤–ª–µ–Ω)
**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```
# File uploads (persistent)
uploads/*
!uploads/.gitkeep
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã, –Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–∞–º—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ git

---

### –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

#### Frontend:

1. **katex** (v0.16.21)
   - Lightweight LaTeX math rendering library
   - –†–∞–∑–º–µ—Ä: 107 KB (gzipped)
   - –ë—ã—Å—Ç—Ä–µ–µ —á–µ–º MathJax (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥)

2. **@types/katex** (v0.16.9)
   - TypeScript –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–ª—è KaTeX

3. **tinymce** (v7.6.0) - dev dependency
   - TypeScript type definitions –¥–ª—è TinyMCE
   - –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ runtime (CDN –∑–∞–≥—Ä—É–∑–∫–∞)

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
cd frontend
npm install katex @types/katex
npm install --save-dev tinymce
```

#### Backend:

**python-multipart** - —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è FastAPI File uploads
- –ü–∞—Ä—Å–∏–Ω–≥ multipart/form-data

---

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –§–∞–∑—ã 4

**TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è:**
- ‚úÖ –í—Å–µ –æ—à–∏–±–∫–∏ —Ç–∏–ø–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚úÖ Build —É—Å–ø–µ—à–µ–Ω (`npm run build`)
- ‚úÖ Bundle size: 1,576 KB (—É–≤–µ–ª–∏—á–∏–ª—Å—è –Ω–∞ +282 KB –∏–∑-–∑–∞ KaTeX)
- ‚úÖ 2472 –º–æ–¥—É–ª–µ–π —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ
- ‚úÖ –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏: 2.41s

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ TypeScript –æ—à–∏–±–∫–∏:**
1. `'evt' is declared but its value is never read` ‚Üí –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ `_evt`
2. `Parameter 'editor' implicitly has an 'any' type` ‚Üí –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è `editor: TinyMCEEditor`
3. `'progress' is declared but its value is never read` ‚Üí –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ `_progress`
4. Missing module 'tinymce' ‚Üí —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–∞–∫ dev dependency

**Python –∫–æ–º–ø–∏–ª—è—Ü–∏—è:**
- ‚úÖ Backend —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏–ª—Å—è
- ‚úÖ –ù–æ–≤—ã–µ endpoints –¥–æ—Å—Ç—É–ø–Ω—ã –≤ `/docs`
- ‚úÖ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è uploads —Å–æ–∑–¥–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–°–µ—Ä–≤–µ—Ä—ã:**
- ‚úÖ Backend API –Ω–∞ –ø–æ—Ä—Ç—É 8000 (uvicorn --reload)
- ‚úÖ Frontend dev server –Ω–∞ –ø–æ—Ä—Ç—É 5174 (Vite)
- ‚úÖ PostgreSQL (healthy)

**–†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–¢–†–ï–ë–£–ï–¢–°–Ø):**
1. [ ] –í–æ–π—Ç–∏ –∫–∞–∫ SUPER_ADMIN
2. [ ] –û—Ç–∫—Ä—ã—Ç—å —É—á–µ–±–Ω–∏–∫ ‚Üí –≤–∫–ª–∞–¥–∫–∞ "–†–µ–¥–∞–∫—Ç–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã"
3. [ ] –û—Ç–∫—Ä—ã—Ç—å –ø–∞—Ä–∞–≥—Ä–∞—Ñ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
4. [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å LaTeX —Ñ–æ—Ä–º—É–ª—ã:
   - [ ] –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "Œ£" –≤ toolbar
   - [ ] –í–≤–µ—Å—Ç–∏ —Ñ–æ—Ä–º—É–ª—É (–Ω–∞–ø—Ä–∏–º–µ—Ä: `x^2 + y^2 = r^2`)
   - [ ] –í—ã–±—Ä–∞—Ç—å Inline –∏–ª–∏ Display —Ä–µ–∂–∏–º
   - [ ] –í—Å—Ç–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É–ª—É
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Preview —Ä–µ–∂–∏–º (—Ñ–æ—Ä–º—É–ª–∞ –¥–æ–ª–∂–Ω–∞ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è)
5. [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Image Upload:
   - [ ] –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "image" –≤ TinyMCE toolbar
   - [ ] –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª –∏–ª–∏ drag-and-drop
   - [ ] –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≥—Ä—É–∑–∫–∏
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
   - [ ] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–∞–≥—Ä–∞—Ñ
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Preview —Ä–µ–∂–∏–º
6. [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:
   - [ ] Auto-save –ø–æ—Å–ª–µ 30 —Å–µ–∫—É–Ω–¥
   - [ ] Manual save —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
   - [ ] –û—Ç–∫—Ä—ã—Ç—å –ø–∞—Ä–∞–≥—Ä–∞—Ñ –∑–∞–Ω–æ–≤–æ - —Ñ–æ—Ä–º—É–ª—ã –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ü—É–Ω–∫—Ç –º–µ–Ω—é "–£—á–µ–±–Ω–∏–∫–∏" –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ —Ä–æ–ª–µ–π
- Backend: `'super_admin'` (lowercase)
- Frontend: `'SUPER_ADMIN'` (uppercase)

**–†–µ—à–µ–Ω–∏–µ:**
1. –û–±–Ω–æ–≤–ª–µ–Ω `frontend/src/types/index.ts` - –∑–Ω–∞—á–µ–Ω–∏—è —Ä–æ–ª–µ–π –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –∫ lowercase
2. –û–±–Ω–æ–≤–ª–µ–Ω `frontend/src/layout/Menu.tsx` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã `UserRole.SUPER_ADMIN`
3. –¢—Ä–µ–±—É–µ—Ç—Å—è –≤—ã—Ö–æ–¥ –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—Ö–æ–¥ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–µ—à–∞

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: MUI TreeView API –∏–∑–º–µ–Ω–∏–ª—Å—è –≤ v7
**–ü—Ä–∏—á–∏–Ω–∞:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ MUI –¥–æ –≤–µ—Ä—Å–∏–∏ 7 –∏–∑–º–µ–Ω–∏–ª–æ API –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–µ—Ä–µ–≤–∞

**–ò–∑–º–µ–Ω–µ–Ω–∏—è API:**
| v6 API | v7 API |
|--------|--------|
| `TreeView` | `SimpleTreeView` |
| `nodeId` | `itemId` |
| `onNodeToggle` | `onExpandedItemsChange` |
| Props –¥–ª—è –∏–∫–æ–Ω–æ–∫ | `slots` –¥–ª—è –∏–∫–æ–Ω–æ–∫ |

**–†–µ—à–µ–Ω–∏–µ:**
- –û–±–Ω–æ–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç: `import { SimpleTreeView } from '@mui/x-tree-view/SimpleTreeView'`
- –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ `nodeId` –Ω–∞ `itemId`
- –û–±–Ω–æ–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: 405 Method Not Allowed –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞
**–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª backend endpoint GET `/paragraphs/{paragraph_id}`

**–û—à–∏–±–∫–∞:**
```
Failed to load resource: the server responded with a status of 405 (Method Not Allowed)
GET /api/v1/admin/global/paragraphs/8
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π endpoint –≤ `backend/app/api/v1/admin_global.py`
2. Endpoint –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (SUPER_ADMIN only)
3. –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç, —á—Ç–æ –ø–∞—Ä–∞–≥—Ä–∞—Ñ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–º—É —É—á–µ–±–Ω–∏–∫—É
4. Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏–ª—Å—è –±–ª–∞–≥–æ–¥–∞—Ä—è —Ä–µ–∂–∏–º—É `--reload`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–¥–∞ (–§–∞–∑—ã 1-4)

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:

**–§–∞–∑–∞ 1:**
- `TextbookCreate.tsx` - 150 —Å—Ç—Ä–æ–∫
- `TextbookEdit.tsx` - 210 —Å—Ç—Ä–æ–∫

**–§–∞–∑–∞ 2:**
- `TextbookStructureEditor.tsx` - 320 —Å—Ç—Ä–æ–∫
- `ChapterCreateDialog.tsx` - 180 —Å—Ç—Ä–æ–∫
- `ChapterEditDialog.tsx` - 190 —Å—Ç—Ä–æ–∫
- `ChapterDeleteDialog.tsx` - 100 —Å—Ç—Ä–æ–∫

**–§–∞–∑–∞ 3:**
- `ParagraphCreateDialog.tsx` - 240 —Å—Ç—Ä–æ–∫
- `ParagraphEditorDialog.tsx` - 450 —Å—Ç—Ä–æ–∫

**–§–∞–∑–∞ 4 (Frontend):**
- `MathFormulaDialog.tsx` - 180 —Å—Ç—Ä–æ–∫
- `tinymce-math-plugin.ts` - 100 —Å—Ç—Ä–æ–∫
- `katex-custom.css` - 40 —Å—Ç—Ä–æ–∫
- `components/index.ts` - +1 —Å—Ç—Ä–æ–∫–∞ (export)

**–§–∞–∑–∞ 4 (Backend):**
- `upload_service.py` - 240 —Å—Ç—Ä–æ–∫
- `schemas/upload.py` - 30 —Å—Ç—Ä–æ–∫
- `api/v1/upload.py` - 80 —Å—Ç—Ä–æ–∫
- `uploads/.gitkeep` - 0 –±–∞–π—Ç

**–ò—Ç–æ–≥–æ –Ω–æ–≤—ã—Ö —Å—Ç—Ä–æ–∫:** ~2,510 —Å—Ç—Ä–æ–∫

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

**–§–∞–∑–∞ 1:**
- `TextbookList.tsx` - 1 —Å—Ç—Ä–æ–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∞
- `App.tsx` - +2 —Å—Ç—Ä–æ–∫–∏ (–∏–º–ø–æ—Ä—Ç—ã + props)

**–§–∞–∑–∞ 2:**
- `TextbookShow.tsx` - +20 —Å—Ç—Ä–æ–∫ (–Ω–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞)
- `Menu.tsx` - +2 —Å—Ç—Ä–æ–∫–∏ (–∏–º–ø–æ—Ä—Ç + –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
- `types/index.ts` - 5 —Å—Ç—Ä–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–æ
- `pages/textbooks/index.ts` - +2 —Å—Ç—Ä–æ–∫–∏ (—ç–∫—Å–ø–æ—Ä—Ç—ã –≥–ª–∞–≤)

**–§–∞–∑–∞ 3:**
- `TextbookStructureEditor.tsx` - +120 —Å—Ç—Ä–æ–∫ (CRUD –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤)
- `pages/textbooks/index.ts` - +2 —Å—Ç—Ä–æ–∫–∏ (—ç–∫—Å–ø–æ—Ä—Ç—ã –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤)
- `layout/AppBar.tsx` - -2 —Å—Ç—Ä–æ–∫–∏ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ToggleThemeButton)
- `backend/app/api/v1/admin_global.py` - +40 —Å—Ç—Ä–æ–∫ (GET –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞ endpoint)

**–§–∞–∑–∞ 4:**
- `ParagraphEditorDialog.tsx` - +80 —Å—Ç—Ä–æ–∫ (KaTeX + image upload)
- `frontend/package.json` - +3 –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `backend/core/config.py` - +5 —Å—Ç—Ä–æ–∫ (upload –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- `backend/main.py` - +15 —Å—Ç—Ä–æ–∫ (StaticFiles + upload router)
- `backend/services/__init__.py` - +3 —Å—Ç—Ä–æ–∫–∏
- `backend/schemas/__init__.py` - +4 —Å—Ç—Ä–æ–∫–∏
- `docker-compose.yml` - +1 volume
- `.gitignore` - +3 —Å—Ç—Ä–æ–∫–∏

**–ò—Ç–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫:** ~356

---

## üîÑ Backend API –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### Textbooks API (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ –ò—Ç–µ—Ä–∞—Ü–∏–∏ 4A):
- ‚úÖ GET `/api/v1/admin/global/textbooks` - —Å–ø–∏—Å–æ–∫ —É—á–µ–±–Ω–∏–∫–æ–≤
- ‚úÖ POST `/api/v1/admin/global/textbooks` - —Å–æ–∑–¥–∞–Ω–∏–µ —É—á–µ–±–Ω–∏–∫–∞
- ‚úÖ GET `/api/v1/admin/global/textbooks/{id}` - –ø–æ–ª—É—á–µ–Ω–∏–µ —É—á–µ–±–Ω–∏–∫–∞
- ‚úÖ PUT `/api/v1/admin/global/textbooks/{id}` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—á–µ–±–Ω–∏–∫–∞
- ‚úÖ DELETE `/api/v1/admin/global/textbooks/{id}` - —É–¥–∞–ª–µ–Ω–∏–µ —É—á–µ–±–Ω–∏–∫–∞

### Chapters API (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ –ò—Ç–µ—Ä–∞—Ü–∏–∏ 4A):
- ‚úÖ GET `/api/v1/admin/global/textbooks/{id}/chapters` - —Å–ø–∏—Å–æ–∫ –≥–ª–∞–≤
- ‚úÖ POST `/api/v1/admin/global/chapters` - —Å–æ–∑–¥–∞–Ω–∏–µ –≥–ª–∞–≤—ã
- ‚úÖ GET `/api/v1/admin/global/chapters/{id}` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≥–ª–∞–≤—ã
- ‚úÖ PUT `/api/v1/admin/global/chapters/{id}` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–ª–∞–≤—ã
- ‚úÖ DELETE `/api/v1/admin/global/chapters/{id}` - —É–¥–∞–ª–µ–Ω–∏–µ –≥–ª–∞–≤—ã

### Paragraphs API:
- ‚úÖ GET `/api/v1/admin/global/chapters/{id}/paragraphs` - —Å–ø–∏—Å–æ–∫ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤ (–ò—Ç–µ—Ä–∞—Ü–∏—è 4A)
- ‚úÖ POST `/api/v1/admin/global/paragraphs` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞ (–ò—Ç–µ—Ä–∞—Ü–∏—è 4A)
- ‚úÖ **GET `/api/v1/admin/global/paragraphs/{id}` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞** (–ò—Ç–µ—Ä–∞—Ü–∏—è 5B, –ù–û–í–û–ï!)
- ‚úÖ PUT `/api/v1/admin/global/paragraphs/{id}` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞ (–ò—Ç–µ—Ä–∞—Ü–∏—è 4A)
- ‚úÖ DELETE `/api/v1/admin/global/paragraphs/{id}` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞ (–ò—Ç–µ—Ä–∞—Ü–∏—è 4A)

### Upload API (–§–∞–∑–∞ 4, –†–ï–ê–õ–ò–ó–û–í–ê–ù):
- ‚úÖ POST `/api/v1/upload/image` - –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (5 MB max, SUPER_ADMIN only)
- ‚úÖ POST `/api/v1/upload/pdf` - –∑–∞–≥—Ä—É–∑–∫–∞ PDF —Ñ–∞–π–ª–æ–≤ (50 MB max, SUPER_ADMIN only)
- ‚úÖ GET `/uploads/{filename}` - —Ä–∞–∑–¥–∞—á–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ StaticFiles

**–°—Ç–∞—Ç—É—Å:** Backend API –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ upload –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤.

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–§–∞–∑–∞ 3)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
```bash
npm install @tinymce/tinymce-react
npm install mathjax@3  # –¥–ª—è LaTeX (–§–∞–∑–∞ 4)
npm install katex react-katex  # –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ MathJax
npm install react-dropzone  # –¥–ª—è upload (–§–∞–∑–∞ 4)
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
1. **ParagraphEditor.tsx** - –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞
   - TinyMCE –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
   - –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞ (title, number, order, summary)
   - Auto-save —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
   - Preview —Ä–µ–∂–∏–º

2. **ParagraphCreateDialog.tsx** - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞
3. **ParagraphEditDialog.tsx** - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞ (–∏–ª–∏ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)

### TinyMCE –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
```typescript
<Editor
  apiKey="no-api-key" // self-hosted
  init={{
    height: 500,
    menubar: false,
    plugins: [
      'advlist', 'autolink', 'lists', 'link', 'image',
      'charmap', 'preview', 'anchor', 'searchreplace',
      'visualblocks', 'code', 'fullscreen', 'insertdatetime',
      'media', 'table', 'help', 'wordcount'
    ],
    toolbar: 'undo redo | blocks | bold italic | alignleft aligncenter alignright | bullist numlist | link image',
  }}
  onEditorChange={handleEditorChange}
/>
```

### Auto-save pattern:
```typescript
const [content, setContent] = useState(paragraph.content);
const [saving, setSaving] = useState(false);
const [lastSaved, setLastSaved] = useState<Date | null>(null);

// Debounced save
const debouncedSave = useMemo(
  () => debounce(async (content: string) => {
    setSaving(true);
    try {
      await updateParagraph(paragraph.id, { content });
      setLastSaved(new Date());
    } finally {
      setSaving(false);
    }
  }, 30000), // 30 —Å–µ–∫—É–Ω–¥
  [paragraph.id]
);

useEffect(() => {
  debouncedSave(content);
}, [content, debouncedSave]);
```

---

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ò—Ç–µ—Ä–∞—Ü–∏–∏ 5B

### –§–∞–∑–∞ 1: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê
- [x] SUPER_ADMIN –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –≥–ª–æ–±–∞–ª—å–Ω—ã–π —É—á–µ–±–Ω–∏–∫ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É
- [x] SUPER_ADMIN –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —É—á–µ–±–Ω–∏–∫–∞
- [x] –ö–Ω–æ–ø–∫–∞ "–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å/–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å" —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [x] TypeScript –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [x] Build –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ

### –§–∞–∑–∞ 2: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê
- [x] –†–µ–¥–∞–∫—Ç–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–µ—Ä–µ–≤–æ –≥–ª–∞–≤ –∏ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤
- [x] SUPER_ADMIN –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –≥–ª–∞–≤—É —á–µ—Ä–µ–∑ dialog
- [x] SUPER_ADMIN –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≥–ª–∞–≤—É
- [x] SUPER_ADMIN –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –≥–ª–∞–≤—É
- [x] –£–¥–∞–ª–µ–Ω–∏–µ –≥–ª–∞–≤—ã –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –∫–∞—Å–∫–∞–¥–Ω–æ–º —É–¥–∞–ª–µ–Ω–∏–∏
- [x] Lazy loading –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ —Ä–∞—Å–∫—Ä—ã—Ç–∏–∏ —É–∑–ª–∞
- [x] –ü—É–Ω–∫—Ç –º–µ–Ω—é "–£—á–µ–±–Ω–∏–∫–∏" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –¥–ª—è SUPER_ADMIN
- [x] TypeScript –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [x] Build –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ

### –§–∞–∑–∞ 3: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê
- [x] SUPER_ADMIN –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –ø–∞—Ä–∞–≥—Ä–∞—Ñ —á–µ—Ä–µ–∑ ParagraphCreateDialog
- [x] SUPER_ADMIN –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–≥—Ä–∞—Ñ —á–µ—Ä–µ–∑ Rich Text Editor (Fullscreen Dialog)
- [x] TinyMCE Rich Text Editor –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω (CDN —Ä–µ–∂–∏–º)
- [x] Rich Text Editor —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç (bold, italic, headers, lists, tables)
- [x] Auto-save —Ä–∞–±–æ—Ç–∞–µ—Ç (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ content –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥)
- [x] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ("–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...", "–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ HH:MM:SS")
- [x] Preview —Ä–µ–∂–∏–º –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –≤–∏–¥ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞
- [x] Manual save –¥–ª—è metadata + content —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
- [x] CRUD –∫–Ω–æ–ø–∫–∏ –¥–ª—è –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤ –≤ TextbookStructureEditor (Create/Edit/Delete)
- [x] Backend endpoint GET `/paragraphs/{id}` –¥–æ–±–∞–≤–ª–µ–Ω
- [x] TypeScript –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [x] Build –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ

### –§–∞–∑–∞ 4: üöß –í –ü–†–û–¶–ï–°–°–ï (–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∞)
- [x] KaTeX –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ LaTeX —Ñ–æ—Ä–º—É–ª
- [x] Custom TinyMCE plugin –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ —Ñ–æ—Ä–º—É–ª —Å–æ–∑–¥–∞–Ω (–∫–Ω–æ–ø–∫–∞ "Œ£")
- [x] MathFormulaDialog —Å live preview —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] LaTeX —Ñ–æ—Ä–º—É–ª—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –≤ preview —Ä–µ–∂–∏–º–µ
- [x] Backend Upload API —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (POST /upload/image, POST /upload/pdf)
- [x] TinyMCE images_upload_handler –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- [x] –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ TinyMCE (drag-and-drop)
- [x] StaticFiles middleware –¥–ª—è —Ä–∞–∑–¥–∞—á–∏ —Ñ–∞–π–ª–æ–≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [x] TypeScript –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [x] Build —É—Å–ø–µ—à–µ–Ω (1,576 KB bundle)
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ LaTeX —Ñ–æ—Ä–º—É–ª –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Image Upload —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- [ ] PDF Upload –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –≤—Å–µ–≥–æ —É—á–µ–±–Ω–∏–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –§–∞–∑–∞ 5: ‚è≥ –ù–ï –ù–ê–ß–ê–¢–ê
- [ ] Drag-and-drop –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏–µ –≥–ª–∞–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ
- [ ] –í—Å–µ –±–∞–≥–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- [ ] TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] Build –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ
- [ ] Performance –ø—Ä–∏–µ–º–ª–µ–º –¥–ª—è MVP

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ—Ç–∫–∏

### Client-side vs Server-side
**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:** Client-side pagination/sorting/filtering
- **–ü—Ä–∏—á–∏–Ω–∞:** Backend API –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:** –ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∑–∞–ø–∏—Å–µ–π (>1000) –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ
- **–†–µ—à–µ–Ω–∏–µ –¥–ª—è production:** –î–æ–±–∞–≤–∏—Ç—å server-side –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ backend

### MUI v7 Migration
**–í–∞–∂–Ω–æ:** –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ MUI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é v7
- TreeView ‚Üí SimpleTreeView
- –ú–Ω–æ–≥–æ breaking changes –≤ API

### TypeScript Strict Mode
**–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥:** –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –í—Å–µ props —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- –í—Å–µ state —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω
- API responses —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ interfaces –∏–∑ `types/index.ts`

### React Admin Patterns
**–°–ª–µ–¥—É–µ–º best practices:**
- Custom Toolbars –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
- useNotify –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- useRefresh –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- useRecordContext –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–µ–∫—É—â–µ–π –∑–∞–ø–∏—Å–∏

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- [React Admin v5](https://marmelab.com/react-admin/)
- [MUI v7](https://mui.com/material-ui/)
- [MUI Tree View](https://mui.com/x/react-tree-view/)
- [TinyMCE React](https://www.tiny.cloud/docs/tinymce/6/react-ref/)
- [KaTeX](https://katex.org/)

### –ù–∞—à –ø—Ä–æ–µ–∫—Ç:
- [IMPLEMENTATION_STATUS.md](./docs/IMPLEMENTATION_STATUS.md) - –æ–±—â–∏–π –ø–ª–∞–Ω
- [ARCHITECTURE.md](./docs/ARCHITECTURE.md) - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- [CLAUDE.md](./CLAUDE.md) - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è Claude Code

---

## üéâ –ò—Ç–æ–≥–∏ –§–∞–∑—ã 3

### –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

**Frontend (3 –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ + –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è):**
1. ‚úÖ ParagraphCreateDialog.tsx (~240 —Å—Ç—Ä–æ–∫) - –±—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤
2. ‚úÖ ParagraphEditorDialog.tsx (~450 —Å—Ç—Ä–æ–∫) - Fullscreen Rich Text Editor
3. ‚úÖ TextbookStructureEditor.tsx (+120 —Å—Ç—Ä–æ–∫) - CRUD –∫–Ω–æ–ø–∫–∏ –¥–ª—è –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤
4. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã: @tinymce/tinymce-react v6.3.0, use-debounce v10.0.6

**Backend (1 –Ω–æ–≤—ã–π endpoint):**
1. ‚úÖ GET `/api/v1/admin/global/paragraphs/{id}` (+40 —Å—Ç—Ä–æ–∫) - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ **Create:** Dialog —Ñ–æ—Ä–º–∞ —Å textarea
- ‚úÖ **Read:** –ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
- ‚úÖ **Update:**
  - Auto-save content –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫ (debounce)
  - Manual save –≤—Å–µ—Ö –ø–æ–ª–µ–π —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É
  - Status indicator
- ‚úÖ **Delete:** Confirmation + API call
- ‚úÖ **Rich Text Editor:** TinyMCE —Å –ø–æ–ª–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ **Preview —Ä–µ–∂–∏–º:** Toggle –º–µ–∂–¥—É Edit –∏ Preview

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –ù–æ–≤—ã—Ö —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞: ~810 (frontend) + 40 (backend) = **850 —Å—Ç—Ä–æ–∫**
- –ò–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫: ~160
- Bundle size —É–≤–µ–ª–∏—á–∏–ª—Å—è: +32 KB (TinyMCE + debounce)
- Build time: 2.22s

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –±–∞–≥–∏:**
1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π GET endpoint –¥–ª—è –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞ (405 –æ—à–∏–±–∫–∞)
2. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω AppBar.tsx (ToggleThemeButton props)
3. ‚úÖ –£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã

### –ß—Ç–æ –¥–∞–ª—å—à–µ (–§–∞–∑–∞ 4)

**LaTeX —Ñ–æ—Ä–º—É–ª—ã + Upload —Ñ–∞–π–ª–æ–≤** (2-3 –¥–Ω—è):
- ‚úÖ KaTeX –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ Custom TinyMCE plugin –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ —Ñ–æ—Ä–º—É–ª
- ‚úÖ ImageUpload —Å drag-and-drop —á–µ—Ä–µ–∑ TinyMCE
- ‚úÖ Backend endpoints –¥–ª—è upload (image + PDF)
- [ ] PDFUpload –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —É—á–µ–±–Ω–∏–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö features

---

## üéâ –ò—Ç–æ–≥–∏ –§–∞–∑—ã 4

### –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

**Frontend (3 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ + –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è):**
1. ‚úÖ MathFormulaDialog.tsx (~180 —Å—Ç—Ä–æ–∫) - fullscreen dialog –¥–ª—è LaTeX —Ñ–æ—Ä–º—É–ª
2. ‚úÖ tinymce-math-plugin.ts (~100 —Å—Ç—Ä–æ–∫) - custom TinyMCE plugin
3. ‚úÖ katex-custom.css (~40 —Å—Ç—Ä–æ–∫) - —Å—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ—Ä–º—É–ª
4. ‚úÖ ParagraphEditorDialog.tsx (+80 —Å—Ç—Ä–æ–∫) - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è KaTeX + image upload
5. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã: katex v0.16.21, @types/katex v0.16.9, tinymce v7.6.0 (dev)

**Backend (3 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ + –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è):**
1. ‚úÖ upload_service.py (~240 —Å—Ç—Ä–æ–∫) - —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤
2. ‚úÖ schemas/upload.py (~30 —Å—Ç—Ä–æ–∫) - Pydantic schemas
3. ‚úÖ api/v1/upload.py (~80 —Å—Ç—Ä–æ–∫) - upload endpoints
4. ‚úÖ config.py (+5 —Å—Ç—Ä–æ–∫) - upload –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
5. ‚úÖ main.py (+15 —Å—Ç—Ä–æ–∫) - StaticFiles + upload router
6. ‚úÖ docker-compose.yml (+1 volume) - –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å uploads

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ **LaTeX —Ñ–æ—Ä–º—É–ª—ã:**
  - –ö–Ω–æ–ø–∫–∞ "Œ£" –≤ TinyMCE toolbar
  - Fullscreen dialog —Å live preview
  - Inline –∏ Display —Ä–µ–∂–∏–º—ã
  - 8 –≥–æ—Ç–æ–≤—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ —Ñ–æ—Ä–º—É–ª
  - KaTeX —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≤ preview —Ä–µ–∂–∏–º–µ
- ‚úÖ **Image Upload:**
  - TinyMCE images_upload_handler
  - Drag-and-drop –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
  - POST /api/v1/upload/image endpoint
  - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–∞ (JPEG, PNG, WebP, GIF) –∏ —Ä–∞–∑–º–µ—Ä–∞ (5 MB)
  - –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ (UUID + timestamp)
  - StaticFiles –¥–ª—è —Ä–∞–∑–¥–∞—á–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ **PDF Upload Backend:**
  - POST /api/v1/upload/pdf endpoint
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Ä–∞–∑–º–µ—Ä –¥–æ 50 MB
  - –ì–æ—Ç–æ–≤ –¥–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –ù–æ–≤—ã—Ö —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞: ~670 (frontend) + 350 (backend) = **~1,020 —Å—Ç—Ä–æ–∫**
- –ò–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫: ~164
- Bundle size —É–≤–µ–ª–∏—á–∏–ª—Å—è: +282 KB (KaTeX library)
- Build time: 2.41s
- –ù–æ–≤—ã–µ endpoints: 2 (POST /upload/image, POST /upload/pdf)

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏:**
1. ‚úÖ TypeScript –æ—à–∏–±–∫–∏ —Å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (evt, progress)
2. ‚úÖ TypeScript –æ—à–∏–±–∫–∞ —Å —Ç–∏–ø–æ–º editor –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
3. ‚úÖ Missing tinymce module (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–∞–∫ dev dependency)

### –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å (Phase 4)

**–†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (–ö–†–ò–¢–ò–ß–ù–û):
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å—Ç–∞–≤–∫—É LaTeX —Ñ–æ—Ä–º—É–ª (Inline –∏ Display —Ä–µ–∂–∏–º—ã)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Preview mode —Å —Ñ–æ—Ä–º—É–ª–∞–º–∏
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Image Upload —á–µ—Ä–µ–∑ TinyMCE
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å auto-save –∏ manual save —Å —Ñ–æ—Ä–º—É–ª–∞–º–∏ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:**
- [ ] PDFUpload –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —É—á–µ–±–Ω–∏–∫–∞ —Ü–µ–ª–∏–∫–æ–º
- [ ] –£–ª—É—á—à–µ–Ω–∏–µ UX (progress bars, error messages)

### –ß—Ç–æ –¥–∞–ª—å—à–µ (–§–∞–∑–∞ 5)

**–ü–æ–ª–∏—Ä–æ–≤–∫–∞ + —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (1-2 –¥–Ω—è):
- Drag-and-drop –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏–µ –≥–ª–∞–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–≥–æ —Ñ–ª–æ—É
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤
- –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ TypeScript
- Performance optimization (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

---

## ‚úÖ Checklist –ø–µ—Ä–µ–¥ –§–∞–∑–æ–π 5

- [x] –§–∞–∑–∞ 1 –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞
- [x] –§–∞–∑–∞ 2 –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞
- [x] –§–∞–∑–∞ 3 –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞
- [x] –§–∞–∑–∞ 4 –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∞
- [x] TypeScript –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [x] Build —É—Å–ø–µ—à–µ–Ω (1,576 KB bundle)
- [x] Dev —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] Backend API –¥–æ—Å—Ç—É–ø–µ–Ω
- [x] PostgreSQL –∑–∞–ø—É—â–µ–Ω
- [x] TinyMCE —Ä–∞–±–æ—Ç–∞–µ—Ç (CDN —Ä–µ–∂–∏–º)
- [x] Auto-save —Ä–∞–±–æ—Ç–∞–µ—Ç (30 —Å–µ–∫ debounce)
- [x] Preview —Ä–µ–∂–∏–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω
- [x] CRUD –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] KaTeX –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –¥–ª—è LaTeX —Ñ–æ—Ä–º—É–ª
- [x] Custom math plugin –¥–ª—è TinyMCE —Å–æ–∑–¥–∞–Ω
- [x] Image Upload backend —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [x] TinyMCE images_upload_handler —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] StaticFiles –¥–ª—è —Ä–∞–∑–¥–∞—á–∏ —Ñ–∞–π–ª–æ–≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ LaTeX —Ñ–æ—Ä–º—É–ª
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Image Upload
- [x] SESSION_LOG –æ–±–Ω–æ–≤–ª–µ–Ω

**–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –§–∞–∑—ã 4 –≥–æ—Ç–æ–≤–∞!** üöÄ
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ LaTeX —Ñ–æ—Ä–º—É–ª –∏ Image Upload, –∑–∞—Ç–µ–º –§–∞–∑–∞ 5 (–ø–æ–ª–∏—Ä–æ–≤–∫–∞)
