# üìö PDF to Text OCR Parser

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö PDF –∫–Ω–∏–≥ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç —Å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤, –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –∑–∞–¥–∞–Ω–∏–π.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ books/
‚îÇ   ‚îú‚îÄ‚îÄ input/          # –ò—Å—Ö–æ–¥–Ω—ã–µ PDF —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ output/         # OCR —Ç–µ–∫—Å—Ç (—É–ª—É—á—à–µ–Ω–Ω—ã–π)
‚îú‚îÄ‚îÄ parsers/            # –°–∫—Ä–∏–ø—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ pdf_to_text.py  # OCR –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ parse_book.py   # –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ä—Å–µ—Ä
‚îú‚îÄ‚îÄ results/            # –§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ *_parsed.json   # JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ *_parsed.txt    # –ß–∏—Ç–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç
‚îú‚îÄ‚îÄ venv/              # –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
‚îî‚îÄ‚îÄ README.md          # –≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã):
```bash
source venv/bin/activate
pip install pdf2image PyPDF2 Pillow
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–Ω–∏–≥–∏

–ü–æ–ª–æ–∂–∏—Ç–µ PDF —Ñ–∞–π–ª –≤ –ø–∞–ø–∫—É `books/input/`:
```bash
cp "–≤–∞—à–∞_–∫–Ω–∏–≥–∞.pdf" books/input/
```

### 3. OCR –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è

```bash
cd parsers
source ../venv/bin/activate
python pdf_to_text.py
```

–ò–ª–∏ —É–∫–∞–∂–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª:
```bash
python pdf_to_text.py ../books/input/–≤–∞—à–∞_–∫–Ω–∏–≥–∞.pdf
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–æ–∑–¥–∞—Å—Ç—Å—è —Ñ–∞–π–ª `books/output/–≤–∞—à–∞_–∫–Ω–∏–≥–∞_improved.txt`

### 4. –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥

```bash
python parse_book.py
```

–ò–ª–∏ —É–∫–∞–∂–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª:
```bash
python parse_book.py ../books/output/–≤–∞—à–∞_–∫–Ω–∏–≥–∞_improved.txt
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–æ–∑–¥–∞–¥—É—Ç—Å—è —Ñ–∞–π–ª—ã –≤ `results/`:
- `–≤–∞—à–∞_–∫–Ω–∏–≥–∞_parsed.json` - JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- `–≤–∞—à–∞_–∫–Ω–∏–≥–∞_parsed.txt` - —á–∏—Ç–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### OCR –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è (pdf_to_text.py)

```bash
# –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
python pdf_to_text.py

# –£–∫–∞–∑–∞—Ç—å –≤—Ö–æ–¥–Ω–æ–π –∏ –≤—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª—ã
python pdf_to_text.py ../books/input/book.pdf -o ../books/output/book.txt

# –ò–∑–º–µ–Ω–∏—Ç—å —è–∑—ã–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
python pdf_to_text.py -l eng+rus  # –ê–Ω–≥–ª–∏–π—Å–∫–∏–π + –†—É—Å—Å–∫–∏–π
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `input_pdf` - –ø—É—Ç—å –∫ PDF —Ñ–∞–π–ª—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `-o, --output` - –ø—É—Ç—å –∫ –≤—ã—Ö–æ–¥–Ω–æ–º—É —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É —Ñ–∞–π–ª—É
- `-l, --lang` - —è–∑—ã–∫–∏ Tesseract (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `rus+kaz`)

### –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ (parse_book.py)

```bash
# –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫
python parse_book.py

# –£–∫–∞–∑–∞—Ç—å –≤—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª –∏ –ø—É—Ç–∏ –≤—ã–≤–æ–¥–∞
python parse_book.py ../books/output/book.txt -j ../results/book.json -t ../results/book.txt
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `input_file` - –ø—É—Ç—å –∫ —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É —Ñ–∞–π–ª—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `-j, --json` - –ø—É—Ç—å –∫ –≤—ã—Ö–æ–¥–Ω–æ–º—É JSON —Ñ–∞–π–ª—É
- `-t, --text` - –ø—É—Ç—å –∫ –≤—ã—Ö–æ–¥–Ω–æ–º—É —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É —Ñ–∞–π–ª—É

## üìä –ß—Ç–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç—Å—è

–ü–∞—Ä—Å–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:

| –¢–∏–ø —ç–ª–µ–º–µ–Ω—Ç–∞ | –ü—Ä–∏–º–µ—Ä—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|---------|----------|
| –ü–∞—Ä–∞–≥—Ä–∞—Ñ—ã | `¬ß 5`, `$ 12` | –†–∞–∑–¥–µ–ª—ã —É—á–µ–±–Ω–∏–∫–∞ |
| –í–æ–ø—Ä–æ—Å—ã | `1. –¢–µ–∫—Å—Ç?`, `2. –í–æ–ø—Ä–æ—Å` | –ù—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã |
| –ó–∞–¥–∞–Ω–∏—è | `–¢–æ–ø—Ç—ã“õ –∂“±–º—ã—Å`, `–ñ“±–ø—Ç—ã“õ –∂“±–º—ã—Å` | –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è |
| –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫–∏ | `–ó–ê–ì–û–õ–û–í–û–ö –†–ê–ó–î–ï–õ–ê` | –ù–∞–∑–≤–∞–Ω–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤ |
| –ò—Å—Ç–æ—á–Ω–∏–∫–∏ | `–î–µ—Ä–µ–∫:`, `Source:` | –¶–∏—Ç–∞—Ç—ã –∏ —Å—Å—ã–ª–∫–∏ |
| –ò–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏ | `–°—É—Ä–µ—Ç 1`, `–†–∏—Å. 5` | –ü–æ–¥–ø–∏—Å–∏ –∫ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º |
| –¢–∞–±–ª–∏—Ü—ã | `–ö–µ—Å—Ç–µ 2`, `–¢–∞–±–ª–∏—Ü–∞ 1` | –¢–∞–±–ª–∏—Ü—ã |

## üìñ –§–æ—Ä–º–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (`results/*_parsed.json`)

```json
{
  "type": "paragraph",
  "title": "¬ß 5 –ñ–æ“£“ì–∞—Ä —à–∞–ø“õ—ã–Ω—à—ã–ª—ã“ì—ã",
  "page": 13,
  "content": [
    {
      "type": "question",
      "text": "1. –ö”©—à–ø–µ–ª—ñ –ñ–æ“£“ì–∞—Ä —Ö–∞–Ω–¥—ã“ì—ã–Ω—ã“£ –∫“Ø—à–µ—é —Å–µ–±–µ–±—ñ–Ω “õ–∞–ª–∞–π —Ç“Ø—Å—ñ–Ω–¥—ñ—Ä–µ—Å—ñ“£–¥–µ—Ä?",
      "page": 7
    },
    {
      "type": "text",
      "text": "“ö–∞–∑–∞“õ —Ö–∞–ª“õ—ã ”ô—Ä“õ–∞—à–∞–Ω –µ–ª–¥—ñ–≥—ñ–Ω —Å–∞“õ—Ç–∞–ø “õ–∞–ª—É“ì–∞ “±–º—Ç—ã–ª–¥—ã.",
      "page": 7
    }
  ]
}
```

### –¢–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç (`results/*_parsed.txt`)

```
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
[PARAGRAPH] ¬ß 5 –ñ–æ“£“ì–∞—Ä —à–∞–ø“õ—ã–Ω—à—ã–ª—ã“ì—ã (—Å—Ç—Ä. 13)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚ùì 1. –ö”©—à–ø–µ–ª—ñ –ñ–æ“£“ì–∞—Ä —Ö–∞–Ω–¥—ã“ì—ã–Ω—ã“£ –∫“Ø—à–µ—é —Å–µ–±–µ–±—ñ–Ω “õ–∞–ª–∞–π —Ç“Ø—Å—ñ–Ω–¥—ñ—Ä–µ—Å—ñ“£–¥–µ—Ä?

“ö–∞–∑–∞“õ —Ö–∞–ª“õ—ã ”ô—Ä“õ–∞—à–∞–Ω –µ–ª–¥—ñ–≥—ñ–Ω —Å–∞“õ—Ç–∞–ø “õ–∞–ª—É“ì–∞ “±–º—Ç—ã–ª–¥—ã.
```

## ‚ú® –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### OCR —É–ª—É—á—à–µ–Ω–∏—è
- ‚úì –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–∫–æ–Ω—Ç—Ä–∞—Å—Ç √ó2, —Ä–µ–∑–∫–æ—Å—Ç—å, —à—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ)
- ‚úì –í—ã—Å–æ–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ (DPI: 400)
- ‚úì –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –∏ –º—É—Å–æ—Ä–∞
- ‚úì –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫
- ‚úì –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º Tesseract (PSM 3)

### –ü–∞—Ä—Å–∏–Ω–≥
- ‚úì –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ‚úì –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
- ‚úì JSON –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚úì –ß–∏—Ç–∞–µ–º—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç —Å —ç–º–æ–¥–∑–∏-–º–∞—Ä–∫–µ—Ä–∞–º–∏
- ‚úì –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–∞–º

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤—Å–µ—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∏–∑ –∫–Ω–∏–≥–∏

```python
import json

with open('results/–ò—Å—Ç–æ—Ä–∏—è –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞ –ö–∞–∑_parsed.json', 'r', encoding='utf-8') as f:
    book = json.load(f)

questions = []
for section in book:
    for item in section.get('content', []):
        if item['type'] == 'question':
            questions.append({
                'text': item['text'],
                'page': item['page'],
                'chapter': section['title']
            })

print(f"–ù–∞–π–¥–µ–Ω–æ –≤–æ–ø—Ä–æ—Å–æ–≤: {len(questions)}")
for q in questions[:5]:
    print(f"–°—Ç—Ä. {q['page']}: {q['text']}")
```

### –ü–æ–∏—Å–∫ –ø–æ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞–º

```python
import json

with open('results/–ò—Å—Ç–æ—Ä–∏—è –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞ –ö–∞–∑_parsed.json', 'r', encoding='utf-8') as f:
    book = json.load(f)

# –ù–∞–π—Ç–∏ –ø–∞—Ä–∞–≥—Ä–∞—Ñ –ø–æ –Ω–æ–º–µ—Ä—É
target = "¬ß 5"
for section in book:
    if section.get('type') == 'paragraph' and target in section.get('title', ''):
        print(f"–ù–∞–π–¥–µ–Ω: {section['title']} (—Å—Ç—Ä. {section['page']})")
        print(f"–≠–ª–µ–º–µ–Ω—Ç–æ–≤: {len(section['content'])}")
        break
```

## üõ†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- Tesseract OCR 5.x
- Poppler (–¥–ª—è pdf2image)
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏: pdf2image, PyPDF2, Pillow

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: ~3-4 —Å–µ–∫—É–Ω–¥—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏: –ª—é–±—ã–µ —è–∑—ã–∫–∏ Tesseract
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π DPI: 300-400
- –§–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤: PDF —Å –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏

## üéØ –¢–µ–∫—É—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ò—Å—Ç–æ—Ä–∏—è –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞ (198 —Å—Ç—Ä.)

- ‚úÖ 83 –≥–ª–∞–≤—ã
- ‚úÖ 81 –ø–∞—Ä–∞–≥—Ä–∞—Ñ
- ‚úÖ 165 –≤–æ–ø—Ä–æ—Å–æ–≤
- ‚úÖ 9 –∑–∞–¥–∞–Ω–∏–π
- ‚úÖ 439 –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫–æ–≤

–§–∞–π–ª—ã:
- `books/input/–ò—Å—Ç–æ—Ä–∏—è –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞ –ö–∞–∑.pdf` - –æ—Ä–∏–≥–∏–Ω–∞–ª
- `books/output/–ò—Å—Ç–æ—Ä–∏—è –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞ –ö–∞–∑_improved.txt` - OCR —Ç–µ–∫—Å—Ç
- `results/–ò—Å—Ç–æ—Ä–∏—è –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞ –ö–∞–∑_parsed.json` - JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- `results/–ò—Å—Ç–æ—Ä–∏—è –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞ –ö–∞–∑_parsed.txt` - —á–∏—Ç–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç

---

**–ê–≤—Ç–æ—Ä:** PDF OCR Parser v2.0
**–î–∞—Ç–∞:** 2025-01-10
